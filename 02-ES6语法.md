# ES6 语法

> ES6+ 核心语法特性和使用场景

## 目录

- [ES6 热门语法](#es6-热门语法)

---

## ES6 热门语法

### ES6 有哪些热门语法？

1. **let/const**：块级作用域
2. **箭头函数**：`const add = (a, b) => a + b`
3. **模板字符串**：`` `Hello ${name}` ``
4. **解构赋值**：`const { name, age } = obj`
5. **扩展运算符**：`[...arr]`、`{...obj}`
6. **Promise/async/await**：异步编程
7. **Class**：类语法
8. **模块化**：`import/export`
9. **Set/Map**：新数据结构
10. **可选链**：`obj?.a?.b`

### 详细说明

#### 1. let/const


// let：块级作用域，可重新赋值
let count = 0;
count = 1;

// const：块级作用域，不可重新赋值
const PI = 3.14;
// PI = 3.15; // 报错

// const 对象的属性可以修改
const obj = { name: 'Alice' };
obj.name = 'Bob'; // ✅ 允许
// obj = {}; // ❌ 不允许


#### 2. 箭头函数


// 传统函数
function add(a, b) {
  return a + b;
}

// 箭头函数
const add = (a, b) => a + b;

// 箭头函数的 this 绑定
const obj = {
  name: 'Alice',
  sayHello: function() {
    setTimeout(() => {
      console.log(this.name); // this 指向 obj
    }, 1000);
  }
};


#### 3. 模板字符串


const name = 'Alice';
const age = 25;

// 传统方式
const str1 = 'My name is ' + name + ', I am ' + age + ' years old';

// 模板字符串
const str2 = `My name is ${name}, I am ${age} years old`;

// 多行字符串
const html = `
  <div>
    <h1>${name}</h1>
    <p>Age: ${age}</p>
  </div>
`;


#### 4. 解构赋值


// 数组解构
const arr = [1, 2, 3];
const [a, b, c] = arr;

// 对象解构
const obj = { name: 'Alice', age: 25 };
const { name, age } = obj;

// 默认值
const { name = 'Unknown', age = 0 } = {};

// 重命名
const { name: userName } = obj;

// 嵌套解构
const user = {
  info: {
    name: 'Alice',
    address: {
      city: 'Beijing'
    }
  }
};
const { info: { name, address: { city } } } = user;


#### 5. 扩展运算符


// 数组扩展
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];
const arr3 = [...arr1, ...arr2]; // [1, 2, 3, 4, 5, 6]

// 对象扩展
const obj1 = { name: 'Alice' };
const obj2 = { age: 25 };
const obj3 = { ...obj1, ...obj2 }; // { name: 'Alice', age: 25 }

// 函数参数
function sum(...args) {
  return args.reduce((total, num) => total + num, 0);
}
sum(1, 2, 3, 4); // 10


#### 6. Promise/async/await


// Promise
function fetchData() {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve('data');
    }, 1000);
  });
}

fetchData()
  .then(data => console.log(data))
  .catch(err => console.error(err));

// async/await
async function getData() {
  try {
    const data = await fetchData();
    console.log(data);
  } catch (err) {
    console.error(err);
  }
}


#### 7. Class


// 类定义
class Person {
  constructor(name, age) {
    this.name = name;
    this.age = age;
  }
  
  sayHello() {
    console.log(`Hello, I'm ${this.name}`);
  }
  
  // 静态方法
  static create(name, age) {
    return new Person(name, age);
  }
}

// 继承
class Student extends Person {
  constructor(name, age, grade) {
    super(name, age);
    this.grade = grade;
  }
  
  study() {
    console.log(`${this.name} is studying`);
  }
}


#### 8. 模块化


// 导出
// utils.js
export const add = (a, b) => a + b;
export const subtract = (a, b) => a - b;

// 默认导出
export default function multiply(a, b) {
  return a * b;
}

// 导入
import multiply, { add, subtract } from './utils.js';

// 重命名导入
import { add as sum } from './utils.js';

// 导入所有
import * as utils from './utils.js';


#### 9. Set/Map


// Set：唯一值集合
const set = new Set([1, 2, 3, 3, 4]);
console.log(set); // Set { 1, 2, 3, 4 }

set.add(5);
set.has(1); // true
set.delete(1);
set.size; // 4

// 数组去重
const arr = [1, 2, 2, 3, 3, 4];
const uniqueArr = [...new Set(arr)]; // [1, 2, 3, 4]

// Map：键值对集合
const map = new Map();
map.set('name', 'Alice');
map.set('age', 25);

map.get('name'); // 'Alice'
map.has('name'); // true
map.delete('name');
map.size; // 1

// 对象作为键
const obj = { id: 1 };
map.set(obj, 'value');
map.get(obj); // 'value'


#### 10. 可选链


// 传统方式
const city = user && user.address && user.address.city;

// 可选链
const city = user?.address?.city;

// 数组可选链
const firstItem = arr?.[0];

// 函数可选链
const result = obj.method?.();


### ES6+ 其他特性

#### 11. 空值合并运算符(??)


// 只有 null 或 undefined 时才使用默认值
const value1 = null ?? 'default'; // 'default'
const value2 = 0 ?? 'default'; // 0
const value3 = '' ?? 'default'; // ''

// 对比 ||
const value4 = 0 || 'default'; // 'default'
const value5 = '' || 'default'; // 'default'


#### 12. 数组方法


// Array.from：类数组转数组
const arr = Array.from('hello'); // ['h', 'e', 'l', 'l', 'o']

// Array.of：创建数组
const arr2 = Array.of(1, 2, 3); // [1, 2, 3]

// includes：是否包含
[1, 2, 3].includes(2); // true

// find/findIndex：查找
[1, 2, 3].find(x => x > 1); // 2
[1, 2, 3].findIndex(x => x > 1); // 1

// flat：扁平化
[1, [2, [3, 4]]].flat(2); // [1, 2, 3, 4]

// flatMap：map + flat
[1, 2, 3].flatMap(x => [x, x * 2]); // [1, 2, 2, 4, 3, 6]


#### 13. 对象方法


// Object.assign：合并对象
const obj = Object.assign({}, { a: 1 }, { b: 2 }); // { a: 1, b: 2 }

// Object.keys/values/entries
const obj2 = { name: 'Alice', age: 25 };
Object.keys(obj2); // ['name', 'age']
Object.values(obj2); // ['Alice', 25]
Object.entries(obj2); // [['name', 'Alice'], ['age', 25]]

// Object.fromEntries：entries 转对象
const entries = [['name', 'Alice'], ['age', 25]];
Object.fromEntries(entries); // { name: 'Alice', age: 25 }


### 总结

**最常用的 ES6 特性:**
1. **let/const** - 替代 var
2. **箭头函数** - 简化函数写法
3. **模板字符串** - 字符串拼接
4. **解构赋值** - 提取数据
5. **扩展运算符** - 数组/对象操作
6. **Promise/async/await** - 异步处理
7. **模块化** - 代码组织
8. **可选链** - 安全访问属性

**记忆技巧:**
- 语法糖：箭头函数、模板字符串、解构
- 异步：Promise、async/await
- 数据结构：Set、Map
- 模块化：import/export
- 安全访问：可选链、空值合并
