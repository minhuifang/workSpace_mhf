# äº¬ä¸œä¸€é¢é—®é¢˜ç­”æ¡ˆ

> æœ¬æ–‡æ¡£åŒ…å«äº¬ä¸œä¸€é¢çš„å¸¸è§é—®é¢˜åŠè¯¦ç»†ç­”æ¡ˆï¼ŒæŒ‰ä¸»é¢˜åˆ†ç±»æ•´ç†

## ğŸ“‘ ç›®å½•

### æ ¸å¿ƒçŸ¥è¯†ç‚¹
- [CSS ç›¸å…³](#css-ç›¸å…³)
  - æ ·å¼éš”ç¦»æ–¹æ¡ˆ
  - Service Worker
- [ES6 è¯­æ³•](#es6-è¯­æ³•)
  - çƒ­é—¨è¯­æ³•ç‰¹æ€§
- [JavaScript åŸºç¡€](#javascript-åŸºç¡€)
  - äº‹ä»¶å¾ªç¯æœºåˆ¶
  - æ•°ç»„æ–¹æ³•è¯¦è§£
  - æ•°ç»„æ“ä½œæ€§èƒ½å¯¹æ¯”
  - é—­åŒ…åº”ç”¨åœºæ™¯
  - åŸå‹é“¾æœºåˆ¶
- [React ç›¸å…³](#react-ç›¸å…³)
  - Hooks ä½¿ç”¨è¯¦è§£
  - ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†
  - æ€§èƒ½ä¼˜åŒ–æŠ€å·§
- [Git ä½¿ç”¨](#git-ä½¿ç”¨)
  - æäº¤ç®¡ç†
  - å†²çªè§£å†³
- [Webpack å·¥ç¨‹åŒ–](#webpack-å·¥ç¨‹åŒ–)
  - æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
  - Loader é…ç½®
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
  - CSS vs JS åŠ¨ç”»
  - å›æµä¸é‡ç»˜ä¼˜åŒ–

### å®ç”¨æŠ€å·§
- [é¢è¯•å›ç­”æŠ€å·§](#é¢è¯•å›ç­”æŠ€å·§)
- [è®°å¿†æŠ€å·§](#è®°å¿†æŠ€å·§)
- [æ€»ç»“](#æ€»ç»“)

---

## CSS ç›¸å…³

### 1. é™¤äº† CSS Modulesï¼Œè¿˜å¯ä»¥ç”¨ä»€ä¹ˆåšæ ·å¼éš”ç¦»ï¼Ÿ

#### æ ·å¼éš”ç¦»æ–¹æ¡ˆå¯¹æ¯”

**1. CSS-in-JS**ï¼ˆstyled-componentsã€emotionï¼‰

const Button = styled.button`
  background: blue;
  color: white;
`;


**2. Scoped CSS**ï¼ˆVue çš„ scopedï¼‰

<style scoped>
.button { color: red; }
</style>


**3. BEM å‘½åè§„èŒƒ**

.button {}
.button__icon {}
.button--primary {}


**4. Shadow DOM**ï¼ˆWeb Componentsï¼‰

**5. Tailwind CSS**ï¼ˆåŸå­åŒ– CSSï¼‰

<button className="bg-blue-500 text-white px-4 py-2">


#### Service Worker çš„ä½œç”¨

- **ç¦»çº¿ç¼“å­˜**ï¼šè®©ç½‘é¡µç¦»çº¿å¯ç”¨ï¼ˆPWAï¼‰
- **æ‹¦æˆªè¯·æ±‚**ï¼šå¯ä»¥æ‹¦æˆªå’Œä¿®æ”¹ç½‘ç»œè¯·æ±‚
- **æ¨é€é€šçŸ¥**ï¼šæ¥æ”¶æœåŠ¡å™¨æ¨é€æ¶ˆæ¯

---

## ES6 è¯­æ³•

### 2. ES6 æœ‰å“ªäº›çƒ­é—¨è¯­æ³•ï¼Ÿ

1. **let/const**ï¼šå—çº§ä½œç”¨åŸŸ
2. **ç®­å¤´å‡½æ•°**ï¼š`const add = (a, b) => a + b`
3. **æ¨¡æ¿å­—ç¬¦ä¸²**ï¼š`` `Hello ${name}` ``
4. **è§£æ„èµ‹å€¼**ï¼š`const { name, age } = obj`
5. **æ‰©å±•è¿ç®—ç¬¦**ï¼š`[...arr]`ã€`{...obj}`
6. **Promise/async/await**ï¼šå¼‚æ­¥ç¼–ç¨‹
7. **Class**ï¼šç±»è¯­æ³•
8. **æ¨¡å—åŒ–**ï¼š`import/export`
9. **Set/Map**ï¼šæ–°æ•°æ®ç»“æ„
10. **å¯é€‰é“¾**ï¼š`obj?.a?.b`

---

## JavaScript åŸºç¡€

### 3. åŒæ­¥ä»»åŠ¡ã€å¼‚æ­¥ä»»åŠ¡çš„æœºåˆ¶

#### äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰

**æ‰§è¡Œé¡ºåºï¼š**

1. æ‰§è¡ŒåŒæ­¥ä»£ç 
2. æ‰§è¡Œå¾®ä»»åŠ¡ï¼ˆPromise.thenï¼‰
3. æ‰§è¡Œå®ä»»åŠ¡ï¼ˆsetTimeoutï¼‰
4. é‡å¤ 2-3

**ä»»åŠ¡åˆ†ç±»ï¼š**
- **å®ä»»åŠ¡**ï¼šsetTimeoutã€setIntervalã€I/Oã€script
- **å¾®ä»»åŠ¡**ï¼šPromise.thenã€async/awaitã€MutationObserver

**ç¤ºä¾‹ï¼š**


console.log('1');           // åŒæ­¥

setTimeout(() => {
  console.log('2');         // å®ä»»åŠ¡
}, 0);

Promise.resolve().then(() => {
  console.log('3');         // å¾®ä»»åŠ¡
});

console.log('4');           // åŒæ­¥

// è¾“å‡ºï¼š1 â†’ 4 â†’ 3 â†’ 2


---

### 4. æ•°ç»„æœ‰å“ªäº›æ–¹æ³•ï¼Ÿmap å’Œ forEach çš„åŒºåˆ«

#### ğŸ”´ æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼ˆMutating Methodsï¼‰

**1. æ·»åŠ /åˆ é™¤å…ƒç´ **
- `push()` - åœ¨æœ«å°¾æ·»åŠ å…ƒç´ 
- `pop()` - åˆ é™¤æœ«å°¾å…ƒç´ 
- `unshift()` - åœ¨å¼€å¤´æ·»åŠ å…ƒç´ 
- `shift()` - åˆ é™¤å¼€å¤´å…ƒç´ 
- `splice()` - æ·»åŠ /åˆ é™¤/æ›¿æ¢å…ƒç´ 

**2. æ’åº/åè½¬**
- `sort()` - æ’åºæ•°ç»„
- `reverse()` - åè½¬æ•°ç»„

**3. å¡«å……**
- `fill()` - å¡«å……æ•°ç»„
- `copyWithin()` - å¤åˆ¶æ•°ç»„çš„ä¸€éƒ¨åˆ†åˆ°å¦ä¸€ä½ç½®

#### ğŸŸ¢ ä¸æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼ˆNon-Mutating Methodsï¼‰

**1. éå†æ–¹æ³•**
- `forEach()` - éå†æ•°ç»„
- `map()` - æ˜ å°„æ–°æ•°ç»„
- `filter()` - è¿‡æ»¤æ•°ç»„
- `reduce()` / `reduceRight()` - ç´¯åŠ å™¨
- `every()` - æ£€æŸ¥æ˜¯å¦æ‰€æœ‰å…ƒç´ æ»¡è¶³æ¡ä»¶
- `some()` - æ£€æŸ¥æ˜¯å¦æœ‰å…ƒç´ æ»¡è¶³æ¡ä»¶
- `find()` / `findIndex()` - æŸ¥æ‰¾å…ƒç´ /ç´¢å¼•
- `findLast()` / `findLastIndex()` - ä»åæŸ¥æ‰¾ï¼ˆES2023ï¼‰

**2. æŸ¥æ‰¾/æ£€æµ‹**
- `indexOf()` / `lastIndexOf()` - æŸ¥æ‰¾ç´¢å¼•
- `includes()` - æ˜¯å¦åŒ…å«æŸå…ƒç´ 

**3. è¿æ¥/åˆ‡ç‰‡**
- `concat()` - è¿æ¥æ•°ç»„
- `slice()` - åˆ‡ç‰‡æ•°ç»„
- `join()` - è½¬æ¢ä¸ºå­—ç¬¦ä¸²

**4. ES6+ æ–°å¢**
- `flat()` - æ‰å¹³åŒ–æ•°ç»„
- `flatMap()` - map + flat
- `toSorted()` - è¿”å›æ’åºåçš„æ–°æ•°ç»„ï¼ˆES2023ï¼‰
- `toReversed()` - è¿”å›åè½¬åçš„æ–°æ•°ç»„ï¼ˆES2023ï¼‰
- `toSpliced()` - è¿”å›spliceåçš„æ–°æ•°ç»„ï¼ˆES2023ï¼‰
- `with()` - è¿”å›æ›¿æ¢æŒ‡å®šç´¢å¼•åçš„æ–°æ•°ç»„ï¼ˆES2023ï¼‰
- `at()` - è·å–æŒ‡å®šç´¢å¼•å…ƒç´ ï¼ˆæ”¯æŒè´Ÿç´¢å¼•ï¼‰

**5. å…¶ä»–**
- `toString()` / `toLocaleString()` - è½¬æ¢ä¸ºå­—ç¬¦ä¸²
- `entries()` / `keys()` / `values()` - è¿”å›è¿­ä»£å™¨

#### ç¤ºä¾‹ä»£ç 


// âŒ æ”¹å˜åŸæ•°ç»„
const arr1 = [1, 2, 3];
arr1.push(4);        // arr1 = [1, 2, 3, 4]
arr1.pop();          // arr1 = [1, 2, 3]
arr1.sort();         // arr1 è¢«æ’åº
arr1.reverse();      // arr1 è¢«åè½¬
arr1.splice(1, 1);   // arr1 = [1, 3]

// âœ… ä¸æ”¹å˜åŸæ•°ç»„
const arr2 = [1, 2, 3];
const newArr1 = arr2.map(x => x * 2);    // arr2 ä¸å˜ï¼ŒnewArr1 = [2, 4, 6]
const newArr2 = arr2.filter(x => x > 1); // arr2 ä¸å˜ï¼ŒnewArr2 = [2, 3]
const newArr3 = arr2.concat([4, 5]);     // arr2 ä¸å˜ï¼ŒnewArr3 = [1, 2, 3, 4, 5]
const newArr4 = arr2.slice(1, 2);        // arr2 ä¸å˜ï¼ŒnewArr4 = [2]

// ES2023 æ–°å¢çš„ä¸æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•
const arr3 = [3, 1, 2];
const sorted = arr3.toSorted();          // arr3 ä¸å˜ï¼Œsorted = [1, 2, 3]
const reversed = arr3.toReversed();      // arr3 ä¸å˜ï¼Œreversed = [2, 1, 3]
const spliced = arr3.toSpliced(1, 1);    // arr3 ä¸å˜ï¼Œspliced = [3, 2]
const replaced = arr3.with(0, 99);       // arr3 ä¸å˜ï¼Œreplaced = [99, 1, 2]


#### map vs forEach

| ç‰¹æ€§ | forEach | map |
|------|---------|-----|
| **è¿”å›å€¼** | undefined | æ–°æ•°ç»„ |
| **é“¾å¼è°ƒç”¨** | ä¸æ”¯æŒ | æ”¯æŒ |
| **ä½¿ç”¨åœºæ™¯** | éå†ã€æ‰§è¡Œå‰¯ä½œç”¨ | è½¬æ¢æ•°ç»„ |
| **æ€§èƒ½** | ç•¥å¿«ï¼ˆæ— è¿”å›å€¼ï¼‰ | ç•¥æ…¢ï¼ˆåˆ›å»ºæ–°æ•°ç»„ï¼‰ |

**ç¤ºä¾‹ï¼š**


const arr = [1, 2, 3];

// forEachï¼šæ— è¿”å›å€¼
arr.forEach(item => console.log(item));

// mapï¼šè¿”å›æ–°æ•°ç»„
const doubled = arr.map(item => item * 2); // [2, 4, 6]


---

### 5. mapã€forEachã€for å¾ªç¯çš„åŒºåˆ«ï¼Œä»¥åŠæ€§èƒ½å¯¹æ¯”

#### å¯¹æ¯”è¡¨æ ¼

| ç‰¹æ€§ | for å¾ªç¯ | forEach | map |
|------|---------|---------|-----|
| **æ€§èƒ½** | æœ€å¿« | ä¸­ç­‰ | æœ€æ…¢ |
| **å¯è¯»æ€§** | è¾ƒå·® | å¥½ | æœ€å¥½ |
| **ä¸­æ–­å¾ªç¯** | æ”¯æŒï¼ˆbreak/continueï¼‰ | ä¸æ”¯æŒ | ä¸æ”¯æŒ |
| **è¿”å›å€¼** | æ—  | undefined | æ–°æ•°ç»„ |
| **ä½¿ç”¨åœºæ™¯** | æ€§èƒ½è¦æ±‚é«˜ | ç®€å•éå† | æ•°æ®è½¬æ¢ |

#### æ€§èƒ½å¯¹æ¯”


const arr = new Array(1000000).fill(1);

// 1. for å¾ªç¯ - æœ€å¿«
console.time('for');
for (let i = 0; i < arr.length; i++) {
  arr[i] * 2;
}
console.timeEnd('for'); // ~3ms

// 2. forEach - ä¸­ç­‰
console.time('forEach');
arr.forEach(item => item * 2);
console.timeEnd('forEach'); // ~15ms

// 3. map - æœ€æ…¢ï¼ˆéœ€è¦åˆ›å»ºæ–°æ•°ç»„ï¼‰
console.time('map');
arr.map(item => item * 2);
console.timeEnd('map'); // ~30ms


#### æ€§èƒ½æ’åº

**for å¾ªç¯ > forEach > map**

**åŸå› ï¼š**
- `for` å¾ªç¯ï¼šç›´æ¥æ“ä½œç´¢å¼•ï¼Œæ— å‡½æ•°è°ƒç”¨å¼€é”€
- `forEach`ï¼šæ¯æ¬¡è¿­ä»£éƒ½è¦è°ƒç”¨å›è°ƒå‡½æ•°
- `map`ï¼šä¸ä»…è¦è°ƒç”¨å›è°ƒï¼Œè¿˜è¦åˆ›å»ºæ–°æ•°ç»„

#### ä½¿ç”¨å»ºè®®

- **éœ€è¦é«˜æ€§èƒ½**ï¼šä½¿ç”¨ `for` å¾ªç¯
- **éœ€è¦ä¸­æ–­å¾ªç¯**ï¼šä½¿ç”¨ `for` å¾ªç¯ï¼ˆbreak/continueï¼‰
- **ç®€å•éå†**ï¼šä½¿ç”¨ `forEach`
- **æ•°æ®è½¬æ¢**ï¼šä½¿ç”¨ `map`

---

### 6. ä¸€ä¸ªæ•°ç»„ä»å‰é¢åˆ é™¤ä¸€ä¸ªå…ƒç´ æ€§èƒ½å¥½ï¼Œè¿˜æ˜¯ä»åé¢åˆ é™¤ä¸€ä¸ªå…ƒç´ æ€§èƒ½å¥½ï¼Ÿ

#### ç­”æ¡ˆï¼šä»åé¢åˆ é™¤æ€§èƒ½æ›´å¥½

#### åŸå› åˆ†æ

**ä»åé¢åˆ é™¤ï¼ˆpopï¼‰ï¼š**

const arr = [1, 2, 3, 4, 5];
arr.pop(); // [1, 2, 3, 4]
// æ—¶é—´å¤æ‚åº¦ï¼šO(1)

- åªéœ€è¦åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ 
- ä¸éœ€è¦ç§»åŠ¨å…¶ä»–å…ƒç´ 
- ç›´æ¥ä¿®æ”¹æ•°ç»„é•¿åº¦

**ä»å‰é¢åˆ é™¤ï¼ˆshiftï¼‰ï¼š**

const arr = [1, 2, 3, 4, 5];
arr.shift(); // [2, 3, 4, 5]
// æ—¶é—´å¤æ‚åº¦ï¼šO(n)

- åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ å
- éœ€è¦å°†æ‰€æœ‰åç»­å…ƒç´ å‘å‰ç§»åŠ¨ä¸€ä½
- æ¶‰åŠå¤§é‡å†…å­˜æ“ä½œ

#### æ€§èƒ½å¯¹æ¯”


// æµ‹è¯•æ•°ç»„
const arr1 = new Array(100000).fill(1);
const arr2 = [...arr1];

// ä»åé¢åˆ é™¤
console.time('pop');
for (let i = 0; i < 10000; i++) {
  arr1.pop();
}
console.timeEnd('pop'); // ~1ms

// ä»å‰é¢åˆ é™¤
console.time('shift');
for (let i = 0; i < 10000; i++) {
  arr2.shift();
}
console.timeEnd('shift'); // ~500ms


#### æ€§èƒ½æ’åº

**popï¼ˆä»ååˆ é™¤ï¼‰>> shiftï¼ˆä»å‰åˆ é™¤ï¼‰**

**å·®è·å¯è¾¾ 500 å€ä»¥ä¸Šï¼**

#### ä¼˜åŒ–å»ºè®®

å¦‚æœéœ€è¦é¢‘ç¹ä»å‰é¢åˆ é™¤å…ƒç´ ï¼Œè€ƒè™‘ï¼š
1. ä½¿ç”¨é“¾è¡¨æ•°æ®ç»“æ„
2. ä½¿ç”¨é˜Ÿåˆ—ï¼ˆQueueï¼‰
3. åè½¬æ•°ç»„ï¼Œä»åé¢åˆ é™¤

---

### 7. é—­åŒ…çš„ä½œç”¨ï¼Œå®é™…å¼€å‘ä½¿ç”¨åˆ°çš„ä¸€äº›åœºæ™¯

#### ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ

**é—­åŒ…**ï¼šå‡½æ•°èƒ½å¤Ÿè®¿é—®å…¶å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ï¼Œå³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•ã€‚


function outer() {
  let count = 0;
  return function inner() {
    count++;
    return count;
  };
}

const counter = outer();
console.log(counter()); // 1
console.log(counter()); // 2
console.log(counter()); // 3


#### é—­åŒ…çš„ä½œç”¨

1. **æ•°æ®ç§æœ‰åŒ–**ï¼šåˆ›å»ºç§æœ‰å˜é‡
2. **ä¿æŒçŠ¶æ€**ï¼šåœ¨å‡½æ•°è°ƒç”¨ä¹‹é—´ä¿æŒæ•°æ®
3. **æ¨¡å—åŒ–**ï¼šåˆ›å»ºç‹¬ç«‹çš„ä½œç”¨åŸŸ
4. **å»¶é•¿å˜é‡ç”Ÿå‘½å‘¨æœŸ**

#### å®é™…å¼€å‘åœºæ™¯

**1. æ•°æ®ç§æœ‰åŒ–å’Œå°è£…**


function createPerson(name) {
  let _age = 0; // ç§æœ‰å˜é‡
  
  return {
    getName() {
      return name;
    },
    getAge() {
      return _age;
    },
    setAge(age) {
      if (age > 0 && age < 150) {
        _age = age;
      }
    }
  };
}

const person = createPerson('å¼ ä¸‰');
person.setAge(25);
console.log(person.getAge()); // 25
console.log(person._age); // undefined - æ— æ³•ç›´æ¥è®¿é—®


**2. é˜²æŠ–å’ŒèŠ‚æµ**


// é˜²æŠ–
function debounce(fn, delay) {
  let timer = null; // é—­åŒ…ä¿å­˜ timer
  
  return function(...args) {
    clearTimeout(timer);
    timer = setTimeout(() => {
      fn.apply(this, args);
    }, delay);
  };
}

// ä½¿ç”¨
const handleSearch = debounce((keyword) => {
  console.log('æœç´¢:', keyword);
}, 500);


**3. æŸ¯é‡ŒåŒ–å‡½æ•°**


function curry(fn) {
  return function curried(...args) {
    if (args.length >= fn.length) {
      return fn.apply(this, args);
    }
    return function(...nextArgs) {
      return curried.apply(this, [...args, ...nextArgs]);
    };
  };
}

// ä½¿ç”¨
const add = (a, b, c) => a + b + c;
const curriedAdd = curry(add);
console.log(curriedAdd(1)(2)(3)); // 6


**4. å•ä¾‹æ¨¡å¼**


const Singleton = (function() {
  let instance = null; // é—­åŒ…ä¿å­˜å®ä¾‹
  
  return function() {
    if (!instance) {
      instance = {
        name: 'Singleton',
        getData() {
          return this.name;
        }
      };
    }
    return instance;
  };
})();

const s1 = new Singleton();
const s2 = new Singleton();
console.log(s1 === s2); // true


**5. è®¡æ•°å™¨å’Œç¼“å­˜**


// è®¡æ•°å™¨
function createCounter() {
  let count = 0;
  
  return {
    increment() { return ++count; },
    decrement() { return --count; },
    getCount() { return count; }
  };
}

// ç¼“å­˜
function memoize(fn) {
  const cache = {}; // é—­åŒ…ä¿å­˜ç¼“å­˜
  
  return function(...args) {
    const key = JSON.stringify(args);
    if (key in cache) {
      return cache[key];
    }
    const result = fn.apply(this, args);
    cache[key] = result;
    return result;
  };
}


**6. React Hooks ä¸­çš„é—­åŒ…**


function Counter() {
  const [count, setCount] = useState(0);
  
  // é—­åŒ…ï¼šhandleClick æ•è·äº† count çš„å€¼
  const handleClick = () => {
    console.log('å½“å‰ count:', count);
    setCount(count + 1);
  };
  
  return <button onClick={handleClick}>{count}</button>;
}


**7. äº‹ä»¶ç›‘å¬å™¨**


function setupButtons() {
  const buttons = document.querySelectorAll('button');
  
  buttons.forEach((button, index) => {
    // é—­åŒ…ï¼šæ¯ä¸ªæŒ‰é’®éƒ½ä¿å­˜äº†è‡ªå·±çš„ index
    button.addEventListener('click', () => {
      console.log(`æŒ‰é’® ${index} è¢«ç‚¹å‡»`);
    });
  });
}


#### é—­åŒ…çš„æ³¨æ„äº‹é¡¹

**1. å†…å­˜æ³„æ¼**


// âŒ å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼
function createLeak() {
  const largeData = new Array(1000000).fill('data');
  
  return function() {
    console.log(largeData[0]); // æŒæœ‰å¤§æ•°ç»„çš„å¼•ç”¨
  };
}

// âœ… åŠæ—¶æ¸…ç†
function createNoLeak() {
  let largeData = new Array(1000000).fill('data');
  const firstItem = largeData[0];
  largeData = null; // é‡Šæ”¾å¼•ç”¨
  
  return function() {
    console.log(firstItem);
  };
}


**2. å¾ªç¯ä¸­çš„é—­åŒ…é™·é˜±**


// âŒ é”™è¯¯ï¼šæ‰€æœ‰å‡½æ•°å…±äº«åŒä¸€ä¸ª i
for (var i = 0; i < 3; i++) {
  setTimeout(() => {
    console.log(i); // 3, 3, 3
  }, 100);
}

// âœ… æ–¹æ¡ˆ1ï¼šä½¿ç”¨ let
for (let i = 0; i < 3; i++) {
  setTimeout(() => {
    console.log(i); // 0, 1, 2
  }, 100);
}

// âœ… æ–¹æ¡ˆ2ï¼šä½¿ç”¨ IIFE
for (var i = 0; i < 3; i++) {
  (function(j) {
    setTimeout(() => {
      console.log(j); // 0, 1, 2
    }, 100);
  })(i);
}


---

### 8. åŸå‹é“¾çš„ä½¿ç”¨

#### åŸå‹é“¾åŸºç¡€


function Person(name) {
  this.name = name;
}

Person.prototype.sayHello = function() {
  console.log('Hello, ' + this.name);
};

const p = new Person('å¼ ä¸‰');


#### åŸå‹é“¾å…³ç³»å›¾


p (å®ä¾‹)
  â†“ __proto__
Person.prototype (åŸå‹å¯¹è±¡)
  â†“ __proto__
Object.prototype (é¡¶å±‚åŸå‹)
  â†“ __proto__
null


#### åŸå‹é“¾è®¿é—®æ–¹å¼


// 1. å®ä¾‹çš„åŸå‹
p.__proto__                    // Person.prototype
Object.getPrototypeOf(p)       // Person.prototype (æ¨è)

// 2. åŸå‹çš„åŸå‹
Person.prototype.__proto__     // Object.prototype
p.__proto__.__proto__          // Object.prototype

// 3. æ„é€ å‡½æ•°
p.__proto__.constructor        // Person
Person.prototype.constructor   // Person
p.constructor                  // Person

// 4. æ„é€ å‡½æ•°çš„åŸå‹
p.__proto__.constructor.prototype                    // Person.prototype
Person.prototype.constructor.prototype               // Person.prototype
p.__proto__.constructor.prototype.__proto__          // Object.prototype
Person.prototype.constructor.prototype.__proto__     // Object.prototype

// 5. é¡¶å±‚
Object.prototype.__proto__     // null


#### åŸå‹é“¾æŸ¥æ‰¾è§„åˆ™


function Person(name) {
  this.name = name;
}

Person.prototype.age = 18;
Object.prototype.gender = 'male';

const p = new Person('å¼ ä¸‰');

console.log(p.name);    // 'å¼ ä¸‰' - åœ¨å®ä¾‹ä¸Šæ‰¾åˆ°
console.log(p.age);     // 18 - åœ¨ Person.prototype ä¸Šæ‰¾åˆ°
console.log(p.gender);  // 'male' - åœ¨ Object.prototype ä¸Šæ‰¾åˆ°
console.log(p.hobby);   // undefined - æ•´ä¸ªåŸå‹é“¾éƒ½æ²¡æ‰¾åˆ°


**æŸ¥æ‰¾é¡ºåºï¼š**
1. å®ä¾‹æœ¬èº«
2. å®ä¾‹çš„åŸå‹ï¼ˆ`Person.prototype`ï¼‰
3. åŸå‹çš„åŸå‹ï¼ˆ`Object.prototype`ï¼‰
4. è¿”å› `undefined`

#### å®é™…åº”ç”¨

**1. ç»§æ‰¿**


// çˆ¶ç±»
function Animal(name) {
  this.name = name;
}

Animal.prototype.eat = function() {
  console.log(this.name + ' is eating');
};

// å­ç±»
function Dog(name, breed) {
  Animal.call(this, name); // ç»§æ‰¿å±æ€§
  this.breed = breed;
}

// ç»§æ‰¿æ–¹æ³•
Dog.prototype = Object.create(Animal.prototype);
Dog.prototype.constructor = Dog;

Dog.prototype.bark = function() {
  console.log('Woof!');
};

const dog = new Dog('æ—ºè´¢', 'å“ˆå£«å¥‡');
dog.eat();  // 'æ—ºè´¢ is eating'
dog.bark(); // 'Woof!'


**2. æ–¹æ³•å…±äº«**


// âŒ æ¯ä¸ªå®ä¾‹éƒ½åˆ›å»ºæ–°å‡½æ•°ï¼ˆæµªè´¹å†…å­˜ï¼‰
function Person(name) {
  this.name = name;
  this.sayHello = function() {
    console.log('Hello, ' + this.name);
  };
}

// âœ… æ‰€æœ‰å®ä¾‹å…±äº«åŒä¸€ä¸ªå‡½æ•°
function Person(name) {
  this.name = name;
}

Person.prototype.sayHello = function() {
  console.log('Hello, ' + this.name);
};


**3. åˆ¤æ–­åŸå‹å…³ç³»**


// instanceof
p instanceof Person        // true
p instanceof Object        // true

// isPrototypeOf
Person.prototype.isPrototypeOf(p)  // true
Object.prototype.isPrototypeOf(p)  // true

// hasOwnProperty
p.hasOwnProperty('name')   // true
p.hasOwnProperty('age')    // false


---

## React ç›¸å…³

### 9. React Hooks æœ‰å“ªäº›ï¼ŸuseState å’Œ useRef çš„åŒºåˆ«ï¼ŒuseEffect çš„ä½œç”¨

#### å¸¸ç”¨ Hooks

- `useState`ï¼šçŠ¶æ€ç®¡ç†
- `useEffect`ï¼šå‰¯ä½œç”¨å¤„ç†
- `useContext`ï¼šä¸Šä¸‹æ–‡
- `useRef`ï¼šå¼•ç”¨å¯¹è±¡
- `useMemo`ï¼šç¼“å­˜è®¡ç®—ç»“æœ
- `useCallback`ï¼šç¼“å­˜å‡½æ•°
- `useReducer`ï¼šå¤æ‚çŠ¶æ€ç®¡ç†
- `useLayoutEffect`ï¼šåŒæ­¥å‰¯ä½œç”¨

#### useState vs useRef

| ç‰¹æ€§ | useState | useRef |
|------|----------|--------|
| **è§¦å‘æ¸²æŸ“** | æ˜¯ | å¦ |
| **ä½¿ç”¨åœºæ™¯** | éœ€è¦æ˜¾ç¤ºçš„çŠ¶æ€ | DOM å¼•ç”¨ã€å®šæ—¶å™¨ ID |
| **æ›´æ–°æ–¹å¼** | `setState` | ç›´æ¥ä¿®æ”¹ `.current` |
| **å€¼çš„æŒä¹…æ€§** | é‡æ¸²æŸ“æ—¶ä¿æŒ | ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå†…ä¿æŒ |

**useRef çš„ç‰¹æ€§ï¼š**
- `useRef` è¿”å›çš„å¯¹è±¡åœ¨ç»„ä»¶æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ä¿æŒåŒä¸€å¼•ç”¨
- ä¿®æ”¹ `ref.current` ä¸ä¼šè§¦å‘é‡æ¸²æŸ“
- é—­åŒ…ä¸­è®¿é—® `ref.current` æ€»æ˜¯è·å–æœ€æ–°å€¼

**ç¤ºä¾‹ï¼š**


// useStateï¼šæ›´æ–°ä¼šé‡æ–°æ¸²æŸ“
const [count, setCount] = useState(0);
setCount(count + 1); // è§¦å‘æ¸²æŸ“

// useRefï¼šæ›´æ–°ä¸ä¼šé‡æ–°æ¸²æŸ“
const countRef = useRef(0);
countRef.current += 1; // ä¸è§¦å‘æ¸²æŸ“


#### useEffect çš„ä½œç”¨

**å¤„ç†å‰¯ä½œç”¨ï¼š**
- æ•°æ®è·å–ï¼ˆAPI è°ƒç”¨ï¼‰
- è®¢é˜…/å–æ¶ˆè®¢é˜…
- å®šæ—¶å™¨
- DOM æ“ä½œ

**ä¸‰ç§ç”¨æ³•ï¼š**


// 1. æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œ
useEffect(() => {
  console.log('æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œ');
});

// 2. åªæ‰§è¡Œä¸€æ¬¡ï¼ˆæŒ‚è½½æ—¶ï¼‰
useEffect(() => {
  console.log('åªåœ¨æŒ‚è½½æ—¶æ‰§è¡Œ');
}, []);

// 3. ä¾èµ–å˜åŒ–æ—¶æ‰§è¡Œ
useEffect(() => {
  console.log('count å˜åŒ–æ—¶æ‰§è¡Œ');
}, [count]);


---

### 10. ç»„ä»¶å¸è½½æ—¶å…³é—­å®šæ—¶å™¨æ€ä¹ˆåšï¼Ÿ

#### ä½¿ç”¨ useEffect çš„æ¸…ç†å‡½æ•°


function Timer() {
  const [count, setCount] = useState(0);
  
  useEffect(() => {
    // å¯åŠ¨å®šæ—¶å™¨
    const timer = setInterval(() => {
      setCount(prev => prev + 1);
    }, 1000);
    
    // è¿”å›æ¸…ç†å‡½æ•°ï¼ˆç»„ä»¶å¸è½½æ—¶æ‰§è¡Œï¼‰
    return () => {
      clearInterval(timer);
      console.log('å®šæ—¶å™¨å·²æ¸…ç†');
    };
  }, []); // ç©ºæ•°ç»„ï¼šåªåœ¨æŒ‚è½½å’Œå¸è½½æ—¶æ‰§è¡Œ
  
  return <div>{count}</div>;
}


**å…³é”®ç‚¹ï¼š**
- `useEffect` è¿”å›ä¸€ä¸ªå‡½æ•°
- è¿™ä¸ªå‡½æ•°åœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œ
- ç¬¬äºŒä¸ªå‚æ•°ä¼ ç©ºæ•°ç»„ `[]`ï¼Œè¡¨ç¤ºåªåœ¨æŒ‚è½½å’Œå¸è½½æ—¶æ‰§è¡Œ

#### å…¶ä»–æ¸…ç†åœºæ™¯


// äº‹ä»¶ç›‘å¬
useEffect(() => {
  const handleResize = () => console.log('resize');
  window.addEventListener('resize', handleResize);
  
  return () => {
    window.removeEventListener('resize', handleResize);
  };
}, []);

// WebSocket
useEffect(() => {
  const ws = new WebSocket('ws://...');
  
  return () => {
    ws.close();
  };
}, []);

// å–æ¶ˆè¯·æ±‚
useEffect(() => {
  const controller = new AbortController();
  
  fetch('/api/data', { signal: controller.signal })
    .then(res => res.json())
    .then(data => console.log(data));
  
  return () => {
    controller.abort(); // å–æ¶ˆè¯·æ±‚
  };
}, []);


---

### 11. useCallback å’Œ useMemo çš„åŒºåˆ«

#### å¯¹æ¯”

| ç‰¹æ€§ | useCallback | useMemo |
|------|-------------|---------|
| **ç¼“å­˜å†…å®¹** | å‡½æ•° | è®¡ç®—ç»“æœï¼ˆå€¼ï¼‰ |
| **è¿”å›å€¼** | å‡½æ•°æœ¬èº« | å‡½æ•°æ‰§è¡Œç»“æœ |
| **ä½¿ç”¨åœºæ™¯** | é¿å…å­ç»„ä»¶é‡å¤æ¸²æŸ“ | é¿å…é‡å¤è®¡ç®— |

#### ç¤ºä¾‹


// useCallbackï¼šç¼“å­˜å‡½æ•°
const handleClick = useCallback(() => {
  console.log(count);
}, [count]);

// useMemoï¼šç¼“å­˜è®¡ç®—ç»“æœ
const expensiveValue = useMemo(() => {
  return count * 2; // è¿”å›è®¡ç®—ç»“æœ
}, [count]);


#### è®°å¿†æŠ€å·§


// useCallback(fn, deps) ç­‰ä»·äº useMemo(() => fn, deps)
const callback1 = useCallback(() => {
  console.log('hello');
}, []);

const callback2 = useMemo(() => {
  return () => console.log('hello');
}, []);

// callback1 === callback2


#### ä½¿ç”¨åœºæ™¯

**useCallbackï¼š**

function Parent() {
  const [count, setCount] = useState(0);
  
  // ç¼“å­˜å‡½æ•°ï¼Œé¿å… Child é‡å¤æ¸²æŸ“
  const handleClick = useCallback(() => {
    console.log('clicked');
  }, []);
  
  return <Child onClick={handleClick} />;
}

const Child = React.memo(({ onClick }) => {
  console.log('Child æ¸²æŸ“');
  return <button onClick={onClick}>ç‚¹å‡»</button>;
});


**useMemoï¼š**

function ExpensiveComponent({ items }) {
  // ç¼“å­˜è®¡ç®—ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—
  const total = useMemo(() => {
    console.log('è®¡ç®—æ€»å’Œ');
    return items.reduce((sum, item) => sum + item.price, 0);
  }, [items]);
  
  return <div>æ€»ä»·ï¼š{total}</div>;
}


---

### 12. useMemo å’Œ React.memo çš„åŒºåˆ«

#### å¯¹æ¯”è¡¨æ ¼

| ç‰¹æ€§ | useMemo | React.memo |
|------|---------|------------|
| **ç±»å‹** | Hook | é«˜é˜¶ç»„ä»¶(HOC) |
| **ä½œç”¨å¯¹è±¡** | å€¼/è®¡ç®—ç»“æœ | ç»„ä»¶ |
| **ä½¿ç”¨ä½ç½®** | ç»„ä»¶å†…éƒ¨ | ç»„ä»¶å¤–éƒ¨(åŒ…è£¹ç»„ä»¶) |
| **ä¼˜åŒ–ç›®æ ‡** | é¿å…é‡å¤è®¡ç®— | é¿å…ç»„ä»¶é‡å¤æ¸²æŸ“ |
| **è¿”å›å€¼** | ç¼“å­˜çš„å€¼ | ç¼“å­˜çš„ç»„ä»¶ |

#### è¯¦ç»†è¯´æ˜

**useMemo:**
- æ˜¯ä¸€ä¸ª React Hook
- ç”¨äºç¼“å­˜**è®¡ç®—ç»“æœ**
- åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨
- é¿å…æ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°è®¡ç®—æ˜‚è´µçš„å€¼


function Component({ a, b }) {
  // ç¼“å­˜è®¡ç®—ç»“æœ
  const result = useMemo(() => {
    console.log('è®¡ç®—ä¸­...');
    return a + b;
  }, [a, b]); // åªæœ‰ a æˆ– b å˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—
  
  return <div>{result}</div>;
}


**React.memo:**
- æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶(HOC)
- ç”¨äºç¼“å­˜**æ•´ä¸ªç»„ä»¶**
- åŒ…è£¹åœ¨ç»„ä»¶å¤–éƒ¨
- é¿å… props æœªå˜åŒ–æ—¶çš„é‡å¤æ¸²æŸ“


// ç”¨ React.memo åŒ…è£¹ç»„ä»¶
const Child = React.memo(function Child({ name, age }) {
  console.log('Child æ¸²æŸ“');
  return <div>{name} - {age}</div>;
});

function Parent() {
  const [count, setCount] = useState(0);
  
  return (
    <>
      <button onClick={() => setCount(count + 1)}>Count: {count}</button>
      {/* count å˜åŒ–æ—¶ï¼ŒChild ä¸ä¼šé‡æ–°æ¸²æŸ“(props æœªå˜åŒ–) */}
      <Child name="å¼ ä¸‰" age={18} />
    </>
  );
}


#### ç»“åˆä½¿ç”¨

ä¸¤è€…ç»å¸¸é…åˆä½¿ç”¨ï¼Œè¾¾åˆ°æœ€ä½³æ€§èƒ½:


function Parent() {
  const [count, setCount] = useState(0);
  const [text, setText] = useState('');
  
  // useMemo ç¼“å­˜å¯¹è±¡ï¼Œé¿å…å¼•ç”¨å˜åŒ–
  const user = useMemo(() => ({
    name: 'å¼ ä¸‰',
    age: 18
  }), []); // ç©ºä¾èµ–ï¼Œuser å¼•ç”¨æ°¸è¿œä¸å˜
  
  // useCallback ç¼“å­˜å‡½æ•°
  const handleClick = useCallback(() => {
    console.log('clicked');
  }, []);
  
  return (
    <>
      <input value={text} onChange={e => setText(e.target.value)} />
      <button onClick={() => setCount(count + 1)}>Count: {count}</button>
      {/* å³ä½¿ Parent é‡æ–°æ¸²æŸ“ï¼ŒChild ä¹Ÿä¸ä¼šé‡æ–°æ¸²æŸ“ */}
      <Child user={user} onClick={handleClick} />
    </>
  );
}

// React.memo åŒ…è£¹ç»„ä»¶
const Child = React.memo(({ user, onClick }) => {
  console.log('Child æ¸²æŸ“');
  return (
    <div>
      <p>{user.name} - {user.age}</p>
      <button onClick={onClick}>ç‚¹å‡»</button>
    </div>
  );
});


#### è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°

React.memo å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œè‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘:


const Child = React.memo(
  ({ user }) => {
    return <div>{user.name}</div>;
  },
  // è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°
  (prevProps, nextProps) => {
    // è¿”å› true è¡¨ç¤ºä¸é‡æ–°æ¸²æŸ“
    // è¿”å› false è¡¨ç¤ºé‡æ–°æ¸²æŸ“
    return prevProps.user.name === nextProps.user.name;
  }
);


#### ä½¿ç”¨åœºæ™¯

**useMemo:**
- è®¡ç®—å¼€é”€å¤§çš„å€¼
- é¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°åˆ›å»ºå¯¹è±¡/æ•°ç»„
- ä½œä¸ºå…¶ä»– Hook çš„ä¾èµ–é¡¹


const expensiveValue = useMemo(() => {
  // å¤æ‚è®¡ç®—
  return items.reduce((sum, item) => sum + item.price, 0);
}, [items]);


**React.memo:**
- çº¯å±•ç¤ºç»„ä»¶
- props å¾ˆå°‘å˜åŒ–çš„ç»„ä»¶
- æ¸²æŸ“å¼€é”€å¤§çš„ç»„ä»¶


const ExpensiveComponent = React.memo(({ data }) => {
  // å¤æ‚çš„æ¸²æŸ“é€»è¾‘
  return <div>{/* ... */}</div>;
});


#### æ³¨æ„äº‹é¡¹

**ä¸è¦è¿‡åº¦ä¼˜åŒ–:**


// âŒ ä¸å¿…è¦çš„ä¼˜åŒ–
const simpleValue = useMemo(() => a + b, [a, b]); // ç®€å•è®¡ç®—ä¸éœ€è¦

// âŒ ä¸å¿…è¦çš„ä¼˜åŒ–
const SimpleComponent = React.memo(({ text }) => {
  return <div>{text}</div>; // ç®€å•ç»„ä»¶ä¸éœ€è¦
});

// âœ… å¿…è¦çš„ä¼˜åŒ–
const complexValue = useMemo(() => {
  // å¤æ‚è®¡ç®—ï¼Œå¦‚æ’åºã€è¿‡æ»¤å¤§æ•°ç»„
  return items.sort().filter(item => item.active);
}, [items]);


---

## Git ä½¿ç”¨

### 13. Git ä½¿ç”¨æ–¹æ³•

#### æ’¤é”€æäº¤

**1. æ’¤é”€æœ€è¿‘ä¸€æ¬¡æäº¤ï¼ˆä¿ç•™ä¿®æ”¹ï¼‰**

git reset --soft HEAD~1
# ä»£ç è¿˜åœ¨æš‚å­˜åŒºï¼Œåªæ˜¯æ’¤é”€äº† commit


**2. æ’¤é”€æœ€è¿‘ä¸€æ¬¡æäº¤ï¼ˆä¸ä¿ç•™ä¿®æ”¹ï¼‰**

git reset --hard HEAD~1
# ä»£ç å’Œ commit éƒ½æ’¤é”€ï¼Œæ…ç”¨ï¼


**3. ä¿®æ”¹æœ€è¿‘ä¸€æ¬¡æäº¤**

git commit --amend
# ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤çš„å†…å®¹æˆ–ä¿¡æ¯


**4. æ’¤é”€å·² push çš„æäº¤**

git revert <commit-id>
# åˆ›å»ºä¸€ä¸ªæ–°æäº¤æ¥æ’¤é”€ä¹‹å‰çš„æäº¤ï¼ˆæ¨èï¼‰


#### è§£å†³ä»£ç å†²çª

**æ­¥éª¤ï¼š**

**1. æ‹‰å–æœ€æ–°ä»£ç **

git pull origin main
# æˆ–
git fetch origin
git merge origin/main


**2. æŸ¥çœ‹å†²çªæ–‡ä»¶**

git status
# æ˜¾ç¤ºæœ‰å†²çªçš„æ–‡ä»¶


**3. æ‰‹åŠ¨è§£å†³å†²çª**

// å†²çªæ–‡ä»¶ä¼šæ˜¾ç¤ºï¼š
<<<<<<< HEAD
ä½ çš„ä»£ç 
=======
åˆ«äººçš„ä»£ç 
>>>>>>> branch-name

// æ‰‹åŠ¨é€‰æ‹©ä¿ç•™å“ªéƒ¨åˆ†ï¼Œåˆ é™¤å†²çªæ ‡è®°


**4. æ ‡è®°ä¸ºå·²è§£å†³**

git add <å†²çªæ–‡ä»¶>


**5. æäº¤åˆå¹¶**

git commit -m "è§£å†³å†²çª"
git push


#### é¢„é˜²å†²çª

- æäº¤å‰å…ˆ `git pull`
- ç»å¸¸åŒæ­¥ä¸»åˆ†æ”¯
- å°æ­¥æäº¤ï¼Œé¿å…å¤§æ”¹åŠ¨
- ä½¿ç”¨ `git rebase` ä¿æŒçº¿æ€§å†å²

---

## Webpack å·¥ç¨‹åŒ–

### 13. Webpack è°ƒä¼˜å’Œ Loader

#### Webpack æ€§èƒ½ä¼˜åŒ–

**1. æ„å»ºé€Ÿåº¦ä¼˜åŒ–**


module.exports = {
  // ç¼©å°æ–‡ä»¶æœç´¢èŒƒå›´
  resolve: {
    modules: ['node_modules'],
    extensions: ['.js', '.jsx'],
    alias: {
      '@': path.resolve(__dirname, 'src')
    }
  },
  
  // ä½¿ç”¨ç¼“å­˜
  cache: {
    type: 'filesystem'
  },
  
  // å¤šçº¿ç¨‹æ‰“åŒ…
  module: {
    rules: [
      {
        test: /\.js$/,
        use: [
          'thread-loader',
          'babel-loader'
        ]
      }
    ]
  },
  
  // æ’é™¤ä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶
  module: {
    rules: [
      {
        test: /\.js$/,
        exclude: /node_modules/,
        use: 'babel-loader'
      }
    ]
  }
};


**2. æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–**


module.exports = {
  // ä»£ç åˆ†å‰²
  optimization: {
    splitChunks: {
      chunks: 'all',
      cacheGroups: {
        vendor: {
          test: /[\\/]node_modules[\\/]/,
          name: 'vendors',
          priority: 10
        }
      }
    }
  },
  
  // å‹ç¼©
  optimization: {
    minimizer: [
      new TerserPlugin({
        parallel: true, // å¤šçº¿ç¨‹å‹ç¼©
        terserOptions: {
          compress: {
            drop_console: true // åˆ é™¤ console
          }
        }
      }),
      new CssMinimizerPlugin()
    ]
  },
  
  // Tree Shaking
  mode: 'production', // è‡ªåŠ¨å¯ç”¨
  
  // å¤–éƒ¨åŒ–ä¾èµ–
  externals: {
    react: 'React',
    'react-dom': 'ReactDOM'
  }
};


**3. å…¶ä»–ä¼˜åŒ–**

- **Tree Shaking**ï¼šå»é™¤æœªä½¿ç”¨ä»£ç 
- **æ‡’åŠ è½½**ï¼š`import()` åŠ¨æ€å¯¼å…¥
- **CDN**ï¼šå¤–éƒ¨åº“ä½¿ç”¨ CDN
- **å›¾ç‰‡å‹ç¼©**ï¼šä½¿ç”¨ `image-webpack-loader`
- **DllPlugin**ï¼šé¢„ç¼–è¯‘ç¬¬ä¸‰æ–¹åº“
- **HardSourceWebpackPlugin**ï¼šç¼“å­˜ä¸­é—´ç»“æœ

#### å¸¸ç”¨ Loader

**1. æ ·å¼ç›¸å…³**


{
  test: /\.css$/,
  use: ['style-loader', 'css-loader']
}

{
  test: /\.scss$/,
  use: ['style-loader', 'css-loader', 'sass-loader']
}

{
  test: /\.less$/,
  use: ['style-loader', 'css-loader', 'less-loader']
}


**2. æ–‡ä»¶ç›¸å…³**


// Webpack 5 ä½¿ç”¨ Asset Modules
{
  test: /\.(png|jpg|gif)$/,
  type: 'asset/resource'
}

{
  test: /\.(woff|woff2|eot|ttf)$/,
  type: 'asset/resource'
}

// å°æ–‡ä»¶è½¬ base64
{
  test: /\.(png|jpg|gif)$/,
  type: 'asset',
  parser: {
    dataUrlCondition: {
      maxSize: 8 * 1024 // 8kb
    }
  }
}


**3. JavaScript ç›¸å…³**


{
  test: /\.js$/,
  use: 'babel-loader',
  exclude: /node_modules/
}

{
  test: /\.ts$/,
  use: 'ts-loader'
}


**4. å…¶ä»– Loader**


// Vue
{
  test: /\.vue$/,
  use: 'vue-loader'
}

// Markdown
{
  test: /\.md$/,
  use: 'markdown-loader'
}

// YAML
{
  test: /\.ya?ml$/,
  use: 'yaml-loader'
}


#### Loader æ‰§è¡Œé¡ºåº

**ä»å³åˆ°å·¦ï¼Œä»ä¸‹åˆ°ä¸Š**


{
  test: /\.scss$/,
  use: ['style-loader', 'css-loader', 'sass-loader']
}

// æ‰§è¡Œé¡ºåºï¼š
// 1. sass-loaderï¼šå°† SCSS ç¼–è¯‘ä¸º CSS
// 2. css-loaderï¼šå¤„ç† CSS ä¸­çš„ @import å’Œ url()
// 3. style-loaderï¼šå°† CSS æ³¨å…¥åˆ° DOM


---

## æ€§èƒ½ä¼˜åŒ–

### 14. é€šè¿‡ JS å®ç°ä¸€ä¸ªåŠ¨ç”»å’Œé€šè¿‡ CSS å®ç°ä¸€ä¸ªåŠ¨ç”»ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå“ªä¸ªæ€§èƒ½æ›´å¥½ï¼Ÿ

#### CSS åŠ¨ç”» vs JS åŠ¨ç”»

| ç‰¹æ€§ | CSS åŠ¨ç”» | JS åŠ¨ç”» |
|------|----------|---------|
| **æ€§èƒ½** | æ›´å¥½ï¼ˆGPU åŠ é€Ÿï¼‰ | è¾ƒå·®ï¼ˆä¸»çº¿ç¨‹ï¼‰ |
| **å¤æ‚åº¦** | ç®€å•åŠ¨ç”» | å¤æ‚åŠ¨ç”» |
| **æ§åˆ¶èƒ½åŠ›** | æœ‰é™ | å¼ºå¤§ |
| **å…¼å®¹æ€§** | å¥½ | å¥½ |
| **è°ƒè¯•** | è¾ƒéš¾ | å®¹æ˜“ |

#### æ€§èƒ½å¯¹æ¯”

**CSS åŠ¨ç”»æ€§èƒ½æ›´å¥½ï¼**

**åŸå› ï¼š**

1. **GPU åŠ é€Ÿ**
   - CSS åŠ¨ç”»å¯ä»¥è§¦å‘ GPU åŠ é€Ÿ
   - ä½¿ç”¨ `transform` å’Œ `opacity` ä¸ä¼šè§¦å‘é‡æ’ï¼ˆreflowï¼‰

2. **æµè§ˆå™¨ä¼˜åŒ–**
   - æµè§ˆå™¨ä¼šè‡ªåŠ¨ä¼˜åŒ– CSS åŠ¨ç”»
   - å¯ä»¥åœ¨åˆæˆçº¿ç¨‹ï¼ˆCompositor Threadï¼‰æ‰§è¡Œ

3. **ä¸»çº¿ç¨‹ç©ºé—²**
   - CSS åŠ¨ç”»ä¸å ç”¨ JavaScript ä¸»çº¿ç¨‹
   - JS åŠ¨ç”»ä¼šé˜»å¡å…¶ä»– JS æ‰§è¡Œ

#### CSS åŠ¨ç”»ç¤ºä¾‹


/* ä½¿ç”¨ transition */
.box {
  transition: transform 0.3s ease;
}

.box:hover {
  transform: translateX(100px);
}

/* ä½¿ç”¨ animation */
@keyframes slide {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(100px);
  }
}

.box {
  animation: slide 1s ease infinite;
}


#### JS åŠ¨ç”»ç¤ºä¾‹


// ä½¿ç”¨ requestAnimationFrame
function animate() {
  const box = document.querySelector('.box');
  let pos = 0;
  
  function step() {
    pos += 2;
    box.style.transform = `translateX(${pos}px)`;
    
    if (pos < 100) {
      requestAnimationFrame(step);
    }
  }
  
  requestAnimationFrame(step);
}

// ä½¿ç”¨ Web Animations API
const box = document.querySelector('.box');
box.animate([
  { transform: 'translateX(0)' },
  { transform: 'translateX(100px)' }
], {
  duration: 1000,
  easing: 'ease-in-out'
});


#### æ€§èƒ½ä¼˜åŒ–å»ºè®®

**1. ä¼˜å…ˆä½¿ç”¨ CSS åŠ¨ç”»**

/* âœ… å¥½ï¼šä½¿ç”¨ transformï¼ˆä¸è§¦å‘é‡æ’ï¼‰ */
.box {
  transform: translateX(100px);
}

/* âŒ å·®ï¼šä½¿ç”¨ leftï¼ˆè§¦å‘é‡æ’ï¼‰ */
.box {
  left: 100px;
}


**2. ä½¿ç”¨ will-change æç¤ºæµè§ˆå™¨**

.box {
  will-change: transform, opacity;
}


**3. é¿å…è§¦å‘é‡æ’çš„å±æ€§**

// è§¦å‘é‡æ’çš„å±æ€§ï¼ˆæ…¢ï¼‰ï¼š
// width, height, top, left, margin, padding

// ä¸è§¦å‘é‡æ’çš„å±æ€§ï¼ˆå¿«ï¼‰ï¼š
// transform, opacity


**4. ä½¿ç”¨ requestAnimationFrame**

// âŒ ä¸è¦ä½¿ç”¨ setInterval
setInterval(() => {
  box.style.left = pos + 'px';
}, 16);

// âœ… ä½¿ç”¨ requestAnimationFrame
function animate() {
  box.style.transform = `translateX(${pos}px)`;
  requestAnimationFrame(animate);
}


#### ä½¿ç”¨åœºæ™¯é€‰æ‹©

**ä½¿ç”¨ CSS åŠ¨ç”»ï¼š**
- ç®€å•çš„è¿‡æ¸¡æ•ˆæœ
- æ‚¬åœæ•ˆæœ
- é¡µé¢åŠ è½½åŠ¨ç”»
- æ€§èƒ½è¦æ±‚é«˜çš„åœºæ™¯

**ä½¿ç”¨ JS åŠ¨ç”»ï¼š**
- å¤æ‚çš„äº¤äº’åŠ¨ç”»
- éœ€è¦ç²¾ç¡®æ§åˆ¶çš„åŠ¨ç”»
- éœ€è¦æ ¹æ®ç”¨æˆ·è¾“å…¥åŠ¨æ€è°ƒæ•´
- éœ€è¦æš‚åœ/æ¢å¤/å€’æ”¾

---

### 15. å›æµ(Reflow)å’Œé‡ç»˜(Repaint)çš„åŒºåˆ«åŠåœºæ™¯

#### æ¦‚å¿µåŒºåˆ†

**å›æµ(Reflow/é‡æ’):**
- å½“å…ƒç´ çš„**å‡ ä½•å±æ€§**å‘ç”Ÿå˜åŒ–æ—¶
- æµè§ˆå™¨éœ€è¦**é‡æ–°è®¡ç®—å…ƒç´ çš„ä½ç½®å’Œå¤§å°**
- ä¼šå½±å“é¡µé¢å¸ƒå±€
- **æ€§èƒ½å¼€é”€å¤§**

**é‡ç»˜(Repaint):**
- å½“å…ƒç´ çš„**æ ·å¼**å‘ç”Ÿå˜åŒ–ï¼Œä½†ä¸å½±å“å¸ƒå±€æ—¶
- æµè§ˆå™¨åªéœ€è¦**é‡æ–°ç»˜åˆ¶å…ƒç´ çš„å¤–è§‚**
- ä¸å½±å“é¡µé¢å¸ƒå±€
- **æ€§èƒ½å¼€é”€è¾ƒå°**

#### å…³ç³»

**å›æµä¸€å®šä¼šå¼•èµ·é‡ç»˜ï¼Œä½†é‡ç»˜ä¸ä¸€å®šå¼•èµ·å›æµ**


// å›æµ(æ”¹å˜å¸ƒå±€) â†’ é‡æ–°è®¡ç®—ä½ç½® â†’ é‡æ–°ç»˜åˆ¶
element.style.width = '200px';  // å›æµ + é‡ç»˜

// é‡ç»˜(åªæ”¹å˜å¤–è§‚) â†’ é‡æ–°ç»˜åˆ¶
element.style.color = 'red';    // åªé‡ç»˜


#### è§¦å‘å›æµçš„æ“ä½œ

**1. æ”¹å˜å‡ ä½•å±æ€§**


// å°ºå¯¸
element.style.width = '100px';
element.style.height = '100px';
element.style.padding = '10px';
element.style.margin = '10px';
element.style.border = '1px solid red';

// ä½ç½®
element.style.top = '10px';
element.style.left = '10px';

// æ˜¾ç¤º/éšè—
element.style.display = 'none';  // å›æµ
element.style.visibility = 'hidden';  // ä¸å›æµï¼Œåªé‡ç»˜


**2. æ·»åŠ /åˆ é™¤ DOM å…ƒç´ **


// æ·»åŠ å…ƒç´ 
parent.appendChild(newElement);

// åˆ é™¤å…ƒç´ 
parent.removeChild(element);

// ä¿®æ”¹å†…å®¹
element.innerHTML = 'new content';


**3. è·å–æŸäº›å±æ€§**ï¼ˆä¼šå¼ºåˆ¶æµè§ˆå™¨ç«‹å³è®¡ç®—ï¼‰


// è¿™äº›æ“ä½œä¼šè§¦å‘æµè§ˆå™¨ç«‹å³å›æµ
const width = element.offsetWidth;
const height = element.offsetHeight;
const top = element.offsetTop;
const left = element.offsetLeft;

const scrollTop = element.scrollTop;
const scrollHeight = element.scrollHeight;

const clientWidth = element.clientWidth;
const clientHeight = element.clientHeight;

const computedStyle = window.getComputedStyle(element);


**4. æµè§ˆå™¨çª—å£å˜åŒ–**


window.addEventListener('resize', () => {
  // çª—å£å¤§å°å˜åŒ–ä¼šè§¦å‘å›æµ
});


#### è§¦å‘é‡ç»˜çš„æ“ä½œ

**åªæ”¹å˜å¤–è§‚ï¼Œä¸å½±å“å¸ƒå±€:**


// é¢œè‰²
element.style.color = 'red';
element.style.backgroundColor = 'blue';

// è¾¹æ¡†æ ·å¼(ä¸æ”¹å˜å®½åº¦)
element.style.borderStyle = 'dashed';

// é˜´å½±
element.style.boxShadow = '0 0 10px red';

// é€æ˜åº¦(æ³¨æ„ï¼šopacity å¯èƒ½è§¦å‘åˆæˆå±‚ï¼Œæ€§èƒ½æ›´å¥½)
element.style.opacity = 0.5;

// å¯è§æ€§
element.style.visibility = 'hidden';  // åªé‡ç»˜ï¼Œä¸å›æµ


#### æµè§ˆå™¨æ¸²æŸ“æµç¨‹

**å®Œæ•´æµç¨‹:**


1. JavaScript æ‰§è¡Œ
   â†“
2. æ ·å¼è®¡ç®—(Style)
   â†“
3. å¸ƒå±€(Layout/Reflow) â† å›æµåœ¨è¿™é‡Œ
   â†“
4. ç»˜åˆ¶(Paint/Repaint) â† é‡ç»˜åœ¨è¿™é‡Œ
   â†“
5. åˆæˆ(Composite)


**å›æµ:** è§¦å‘æ­¥éª¤ 3ã€4ã€5
**é‡ç»˜:** è§¦å‘æ­¥éª¤ 4ã€5
**åˆæˆ:** åªè§¦å‘æ­¥éª¤ 5ï¼ˆæœ€å¿«ï¼‰

#### æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

**1. æ‰¹é‡ä¿®æ”¹æ ·å¼**


// âŒ å¤šæ¬¡å›æµ
element.style.width = '100px';
element.style.height = '100px';
element.style.margin = '10px';

// âœ… ä¸€æ¬¡å›æµ(ä½¿ç”¨ class)
element.className = 'new-style';

// âœ… ä¸€æ¬¡å›æµ(ä½¿ç”¨ cssText)
element.style.cssText = 'width: 100px; height: 100px; margin: 10px;';


**2. æ‰¹é‡ä¿®æ”¹ DOM**


// âŒ å¤šæ¬¡å›æµ
for (let i = 0; i < 1000; i++) {
  const div = document.createElement('div');
  document.body.appendChild(div);  // æ¯æ¬¡éƒ½å›æµ
}

// âœ… ä¸€æ¬¡å›æµ(ä½¿ç”¨ DocumentFragment)
const fragment = document.createDocumentFragment();
for (let i = 0; i < 1000; i++) {
  const div = document.createElement('div');
  fragment.appendChild(div);
}
document.body.appendChild(fragment);  // åªå›æµä¸€æ¬¡


**3. ç¼“å­˜å¸ƒå±€ä¿¡æ¯**


// âŒ æ¯æ¬¡éƒ½è§¦å‘å›æµ
for (let i = 0; i < 100; i++) {
  element.style.left = element.offsetLeft + 1 + 'px';  // è¯»å†™äº¤æ›¿
}

// âœ… ç¼“å­˜åå†ä¿®æ”¹
const left = element.offsetLeft;  // è¯»ä¸€æ¬¡
for (let i = 0; i < 100; i++) {
  element.style.left = left + i + 'px';  // åªå†™
}


**4. ä½¿ç”¨ transform ä»£æ›¿ top/left**


// âŒ è§¦å‘å›æµ
element.style.left = '100px';

// âœ… ä¸è§¦å‘å›æµï¼Œä½¿ç”¨åˆæˆå±‚
element.style.transform = 'translateX(100px)';


**5. ä½¿ç”¨ visibility ä»£æ›¿ display**


// âŒ è§¦å‘å›æµ
element.style.display = 'none';

// âœ… åªè§¦å‘é‡ç»˜
element.style.visibility = 'hidden';


**6. ç¦»çº¿æ“ä½œ DOM**


// âŒ åœ¨çº¿ä¿®æ”¹
element.style.width = '100px';
element.style.height = '100px';

// âœ… ç¦»çº¿ä¿®æ”¹(display: none åä¿®æ”¹)
element.style.display = 'none';
element.style.width = '100px';
element.style.height = '100px';
element.style.display = 'block';  // åªå›æµä¸€æ¬¡

// âœ… ä½¿ç”¨ cloneNode
const clone = element.cloneNode(true);
clone.style.width = '100px';
clone.style.height = '100px';
element.parentNode.replaceChild(clone, element);


**7. ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨**


// å¯¹äºé•¿åˆ—è¡¨ï¼Œåªæ¸²æŸ“å¯è§åŒºåŸŸ
// ä½¿ç”¨ react-window æˆ– react-virtualized


**8. é¿å…ä½¿ç”¨ table å¸ƒå±€**


// âŒ table å¸ƒå±€ï¼šä¸€ä¸ªå•å…ƒæ ¼å˜åŒ–ï¼Œæ•´ä¸ªè¡¨æ ¼å›æµ
<table>...</table>

// âœ… ä½¿ç”¨ div + flex/grid
<div style="display: flex">...</div>


**9. ä½¿ç”¨ will-change æç¤ºæµè§ˆå™¨**


.element {
  /* æç¤ºæµè§ˆå™¨è¯¥å…ƒç´ å°†è¦å˜åŒ– */
  will-change: transform, opacity;
}

// ä½¿ç”¨åè®°å¾—ç§»é™¤
element.style.willChange = 'auto';


**10. ä½¿ç”¨ requestAnimationFrame**


// âŒ ç›´æ¥ä¿®æ”¹å¯èƒ½åœ¨é”™è¯¯æ—¶æœº
element.style.transform = 'translateX(100px)';

// âœ… åœ¨æµè§ˆå™¨é‡ç»˜å‰ä¿®æ”¹
requestAnimationFrame(() => {
  element.style.transform = 'translateX(100px)';
});


#### æ€§èƒ½å¯¹æ¯”

| æ“ä½œç±»å‹ | æ€§èƒ½å½±å“ | ç¤ºä¾‹ |
|---------|---------|------|
| **åˆæˆ** | æœ€å¿« | `transform`, `opacity` |
| **é‡ç»˜** | è¾ƒå¿« | `color`, `background-color` |
| **å›æµ** | æœ€æ…¢ | `width`, `height`, `top`, `left` |

**æ€§èƒ½æ’åº:** åˆæˆ > é‡ç»˜ > å›æµ

#### å®é™…åœºæ™¯ä¼˜åŒ–

**åœºæ™¯1: åŠ¨ç”»**


// âŒ è§¦å‘å›æµ
@keyframes move {
  from { left: 0; }
  to { left: 100px; }
}

// âœ… ä½¿ç”¨ transform(åˆæˆ)
@keyframes move {
  from { transform: translateX(0); }
  to { transform: translateX(100px); }
}


**åœºæ™¯2: æ˜¾ç¤º/éšè—**


// âŒ è§¦å‘å›æµ
element.style.display = 'none';

// âœ… åªè§¦å‘é‡ç»˜
element.style.visibility = 'hidden';

// âœ… ä½¿ç”¨ opacity + pointer-events(åˆæˆ)
element.style.opacity = '0';
element.style.pointerEvents = 'none';


**åœºæ™¯3: åˆ—è¡¨æ¸²æŸ“**


// âŒ æ¯æ¬¡éƒ½å›æµ
items.forEach(item => {
  const div = document.createElement('div');
  div.textContent = item;
  container.appendChild(div);  // è§¦å‘å›æµ
});

// âœ… ä½¿ç”¨ innerHTML(ä¸€æ¬¡å›æµ)
container.innerHTML = items.map(item => `<div>${item}</div>`).join('');

// âœ… ä½¿ç”¨ DocumentFragment
const fragment = document.createDocumentFragment();
items.forEach(item => {
  const div = document.createElement('div');
  div.textContent = item;
  fragment.appendChild(div);
});
container.appendChild(fragment);  // åªå›æµä¸€æ¬¡


#### è°ƒè¯•å·¥å…·

**Chrome DevTools:**

1. **Performance é¢æ¿**
   - å½•åˆ¶æ€§èƒ½
   - æŸ¥çœ‹ Layout(å›æµ) å’Œ Paint(é‡ç»˜) äº‹ä»¶

2. **Rendering é¢æ¿**
   - å¼€å¯ "Paint flashing"(ç»˜åˆ¶é—ªçƒ)
   - å¼€å¯ "Layout Shift Regions"(å¸ƒå±€åç§»åŒºåŸŸ)

3. **Layers é¢æ¿**
   - æŸ¥çœ‹åˆæˆå±‚
   - åˆ†æå±‚çš„åˆ›å»ºåŸå› 

#### æ€»ç»“

**æ ¸å¿ƒåŸåˆ™:**
1. **å‡å°‘å›æµå’Œé‡ç»˜çš„æ¬¡æ•°**
2. **æ‰¹é‡ä¿®æ”¹æ ·å¼å’Œ DOM**
3. **ä½¿ç”¨ transform å’Œ opacity åšåŠ¨ç”»**
4. **ç¼“å­˜å¸ƒå±€ä¿¡æ¯**
5. **é¿å…é¢‘ç¹è¯»å–ä¼šè§¦å‘å›æµçš„å±æ€§**

**è®°å¿†å£è¯€:**
- æ”¹ä½ç½®ã€æ”¹å¤§å° â†’ å›æµ
- æ”¹é¢œè‰²ã€æ”¹æ ·å¼ â†’ é‡ç»˜
- ç”¨ transformã€ç”¨ opacity â†’ åˆæˆ(æœ€å¿«)

---

## é¢è¯•å›ç­”æŠ€å·§

### é€šç”¨æŠ€å·§

1. **å…ˆè¯´æ ¸å¿ƒæ¦‚å¿µ**ï¼Œå†ä¸¾ä¾‹å­
2. **å¯¹æ¯”ä¼˜ç¼ºç‚¹**ï¼Œå±•ç¤ºæ€è€ƒæ·±åº¦
3. **ç»“åˆå®é™…é¡¹ç›®**ç»éªŒ
4. **ç®€æ´æ˜äº†**ï¼Œä¸è¦è¿‡åº¦å±•å¼€
5. **é‡åˆ°ä¸ä¼šçš„**ï¼Œè¯šå®è¯´æ˜å¹¶è¡¨è¾¾å­¦ä¹ æ„æ„¿

### å›ç­”æ¨¡æ¿

**æŠ€æœ¯é—®é¢˜ï¼š**
1. å®šä¹‰/æ¦‚å¿µ
2. æ ¸å¿ƒåŸç†
3. ä½¿ç”¨åœºæ™¯
4. ä¼˜ç¼ºç‚¹å¯¹æ¯”
5. å®é™…æ¡ˆä¾‹

**æ€§èƒ½é—®é¢˜ï¼š**
1. æ€§èƒ½ç“¶é¢ˆåˆ†æ
2. ä¼˜åŒ–æ–¹æ¡ˆ
3. æ•ˆæœå¯¹æ¯”
4. æ³¨æ„äº‹é¡¹

**é¡¹ç›®é—®é¢˜ï¼š**
1. é¡¹ç›®èƒŒæ™¯
2. é‡åˆ°çš„é—®é¢˜
3. è§£å†³æ–¹æ¡ˆ
4. æœ€ç»ˆæ•ˆæœ
5. ç»éªŒæ€»ç»“

---

## è¡¥å……èµ„æ–™

### è®°å¿†æŠ€å·§

**æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼š**
- ç›´æ¥æ“ä½œæ•°ç»„ç»“æ„çš„ï¼ˆpush/pop/shift/unshift/spliceï¼‰
- é‡æ–°æ’åˆ—çš„ï¼ˆsort/reverseï¼‰
- å¡«å……ä¿®æ”¹çš„ï¼ˆfill/copyWithinï¼‰

**ä¸æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼š**
- è¿”å›æ–°æ•°ç»„çš„ï¼ˆmap/filter/concat/slice/flatï¼‰
- è¿”å›å•ä¸ªå€¼çš„ï¼ˆfind/reduce/every/someï¼‰
- è¿”å›ç´¢å¼•æˆ–å¸ƒå°”å€¼çš„ï¼ˆindexOf/includesï¼‰
- ES2023 çš„ to* ç³»åˆ—æ–¹æ³•ï¼ˆtoSorted/toReversed/toSplicedï¼‰

### æ€§èƒ½æ’åºæ€»ç»“

**æ•°ç»„æ“ä½œï¼š**
- `pop` >> `shift`ï¼ˆä»ååˆ é™¤æ¯”ä»å‰åˆ é™¤å¿« 500 å€ï¼‰
- `for` > `forEach` > `map`

**åŠ¨ç”»æ€§èƒ½ï¼š**
- CSS åŠ¨ç”» > JS åŠ¨ç”»
- `transform/opacity` > `width/height/left/top`

**Webpack ä¼˜åŒ–ï¼š**
- æ„å»ºé€Ÿåº¦ï¼šç¼“å­˜ > å¤šçº¿ç¨‹ > å‡å°‘æœç´¢èŒƒå›´
- æ‰“åŒ…ä½“ç§¯ï¼šTree Shaking > ä»£ç åˆ†å‰² > å‹ç¼©

---

## æ€»ç»“

æœ¬æ–‡æ¡£æ¶µç›–äº†äº¬ä¸œä¸€é¢çš„å¸¸è§é—®é¢˜ï¼ŒåŒ…æ‹¬ï¼š
- âœ… CSS æ ·å¼éš”ç¦»æ–¹æ¡ˆ
- âœ… ES6 æ ¸å¿ƒè¯­æ³•
- âœ… JavaScript åŸºç¡€ï¼ˆäº‹ä»¶å¾ªç¯ã€æ•°ç»„æ–¹æ³•ã€é—­åŒ…ã€åŸå‹é“¾ï¼‰
- âœ… React Hooks ä½¿ç”¨
- âœ… Git æ“ä½œæŠ€å·§
- âœ… Webpack æ€§èƒ½ä¼˜åŒ–
- âœ… å‰ç«¯æ€§èƒ½ä¼˜åŒ–

**å»ºè®®ï¼š**
1. ç†è§£æ ¸å¿ƒåŸç†ï¼Œä¸è¦æ­»è®°ç¡¬èƒŒ
2. å¤šåŠ¨æ‰‹å®è·µï¼ŒåŠ æ·±ç†è§£
3. ç»“åˆå®é™…é¡¹ç›®ç»éªŒ
4. ä¿æŒå­¦ä¹ çƒ­æƒ…

ç¥é¢è¯•é¡ºåˆ©ï¼ğŸ‰


Person.prototype.constructor           // Person
Person.prototype.constructor.prototype // Person.prototype
Person.prototype.constructor.prototype.__proto__ // Object.prototype


mapã€forEachã€forå¾ªç¯çš„åŒºåˆ«ï¼Œä»¥åŠæ€§èƒ½å¯¹æ¯”

ä¸€ä¸ªæ•°ç»„ä»å‰é¢åˆ é™¤ä¸€ä¸ªå…ƒç´ æ€§èƒ½å¥½ï¼Œè¿˜æ˜¯ä»åé¢åˆ é™¤ä¸€ä¸ªå…ƒç´ æ€§èƒ½å¥½

é€šè¿‡jså®ç°ä¸€ä¸ªåŠ¨ç”»å’Œé€šè¿‡csså®ç°ä¸€ä¸ªåŠ¨ç”»ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå“ªä¸ªæ€§èƒ½æ›´å¥½

é—­åŒ…çš„ä½œç”¨ï¼Œå®é™…å¼€å‘ä½¿ç”¨åˆ°çš„ä¸€äº›åœºæ™¯

webpackçš„æ‰“åŒ…ä¼˜åŒ–æ–¹å¼æœ‰å“ªäº›
| **å¯ä¸­æ–­** | æ˜¯ï¼ˆbreak/continueï¼‰ | å¦ | å¦ |
| **é“¾å¼è°ƒç”¨** | ä¸æ”¯æŒ | ä¸æ”¯æŒ | æ”¯æŒ |
| **æ€§èƒ½** | æœ€å¿« | è¾ƒæ…¢ | è¾ƒæ…¢ |
| **ä½¿ç”¨åœºæ™¯** | éœ€è¦æ§åˆ¶æµç¨‹ | ç®€å•éå† | æ•°æ®è½¬æ¢ |

### ä»£ç ç¤ºä¾‹

```javascript
const arr = [1, 2, 3, 4, 5];

// 1. for å¾ªç¯ - æœ€çµæ´»
for (let i = 0; i < arr.length; i++) {
  if (arr[i] === 3) break; // å¯ä»¥ä¸­æ–­
  console.log(arr[i]);
}

// 2. forEach - ç®€æ´ä½†ä¸èƒ½ä¸­æ–­
arr.forEach((item, index) => {
  // æ— æ³•ä½¿ç”¨ breakï¼Œåªèƒ½ return è·³è¿‡å½“å‰
  if (item === 3) return;
  console.log(item);
});

// 3. map - é€‚åˆæ•°æ®è½¬æ¢
const doubled = arr.map(item => item * 2); // [2, 4, 6, 8, 10]
```

### æ€§èƒ½å¯¹æ¯”

**æµ‹è¯• 100 ä¸‡ä¸ªå…ƒç´ ï¼š**

```javascript
const arr = Array.from({ length: 1000000 }, (_, i) => i);

// 1. for å¾ªç¯ï¼š~3msï¼ˆæœ€å¿«ï¼‰
console.time('for');
for (let i = 0; i < arr.length; i++) {
  const x = arr[i] * 2;
}
console.timeEnd('for');

// 2. forEachï¼š~15ms
console.time('forEach');
arr.forEach(item => {
  const x = item * 2;
});
console.timeEnd('forEach');

// 3. mapï¼š~20msï¼ˆæœ€æ…¢ï¼Œå› ä¸ºåˆ›å»ºæ–°æ•°ç»„ï¼‰
console.time('map');
const result = arr.map(item => item * 2);
console.timeEnd('map');
```

**æ€§èƒ½æ’åºï¼š** for > forEach > map

### é€‰æ‹©å»ºè®®

- **éœ€è¦ break/continue**ï¼šç”¨ `for` å¾ªç¯
- **ç®€å•éå†ã€æ‰§è¡Œå‰¯ä½œç”¨**ï¼šç”¨ `forEach`
- **æ•°æ®è½¬æ¢ã€éœ€è¦è¿”å›æ–°æ•°ç»„**ï¼šç”¨ `map`
- **æ€§èƒ½æ•æ„Ÿåœºæ™¯**ï¼šç”¨ `for` å¾ªç¯

---

## 11. æ•°ç»„ä»å‰é¢åˆ é™¤ vs ä»åé¢åˆ é™¤ï¼Œå“ªä¸ªæ€§èƒ½æ›´å¥½ï¼Ÿ

### ç­”æ¡ˆï¼šä»åé¢åˆ é™¤æ€§èƒ½æ›´å¥½

### åŸå› åˆ†æ

```javascript
const arr = [1, 2, 3, 4, 5];

// âŒ ä»å‰é¢åˆ é™¤ - æ€§èƒ½å·®ï¼ˆO(n)ï¼‰
arr.shift();  // [2, 3, 4, 5]
// éœ€è¦å°†æ‰€æœ‰åç»­å…ƒç´ å‘å‰ç§»åŠ¨ä¸€ä½

// âœ… ä»åé¢åˆ é™¤ - æ€§èƒ½å¥½ï¼ˆO(1)ï¼‰
arr.pop();    // [1, 2, 3, 4]
// åªéœ€è¦åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ— éœ€ç§»åŠ¨å…¶ä»–å…ƒç´ 
```

### æ—¶é—´å¤æ‚åº¦å¯¹æ¯”

| æ“ä½œ | æ—¶é—´å¤æ‚åº¦ | è¯´æ˜ |
|------|-----------|------|
| `arr.pop()` | O(1) | ç›´æ¥åˆ é™¤æœ«å°¾ï¼Œæ— éœ€ç§»åŠ¨å…ƒç´  |
| `arr.shift()` | O(n) | åˆ é™¤å¼€å¤´ï¼Œéœ€è¦ç§»åŠ¨æ‰€æœ‰åç»­å…ƒç´  |
| `arr.push()` | O(1) | åœ¨æœ«å°¾æ·»åŠ  |
| `arr.unshift()` | O(n) | åœ¨å¼€å¤´æ·»åŠ ï¼Œéœ€è¦ç§»åŠ¨æ‰€æœ‰å…ƒç´  |

### æ€§èƒ½æµ‹è¯•

```javascript
const arr1 = Array.from({ length: 100000 }, (_, i) => i);
const arr2 = [...arr1];

// ä»åé¢åˆ é™¤ï¼š~1ms
console.time('pop');
while (arr1.length > 0) {
  arr1.pop();
}
console.timeEnd('pop');

// ä»å‰é¢åˆ é™¤ï¼š~5000msï¼ˆæ…¢ 5000 å€ï¼ï¼‰
console.time('shift');
while (arr2.length > 0) {
  arr2.shift();
}
console.timeEnd('shift');
```

### ä¼˜åŒ–å»ºè®®

å¦‚æœéœ€è¦ä»å‰é¢åˆ é™¤ï¼Œå¯ä»¥è€ƒè™‘ï¼š
1. **åè½¬æ•°ç»„åä»åé¢åˆ é™¤**
2. **ä½¿ç”¨ç´¢å¼•æ ‡è®°**ï¼ˆä¸çœŸæ­£åˆ é™¤ï¼‰
3. **ä½¿ç”¨é“¾è¡¨æ•°æ®ç»“æ„**

```javascript
// ä¼˜åŒ–æ–¹æ¡ˆï¼šä½¿ç”¨ç´¢å¼•
let startIndex = 0;
const arr = [1, 2, 3, 4, 5];

// ä¸çœŸæ­£åˆ é™¤ï¼Œåªç§»åŠ¨ç´¢å¼•
startIndex++; // ç›¸å½“äºåˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ 
const current = arr[startIndex]; // è®¿é—®å½“å‰"ç¬¬ä¸€ä¸ª"å…ƒç´ 
```

---

## 12. JS å®ç°åŠ¨ç”» vs CSS å®ç°åŠ¨ç”»ï¼ŒåŒºåˆ«å’Œæ€§èƒ½å¯¹æ¯”

### å¯¹æ¯”è¡¨æ ¼

| ç‰¹æ€§ | CSS åŠ¨ç”» | JS åŠ¨ç”» |
|------|---------|---------|
| **æ€§èƒ½** | æ›´å¥½ï¼ˆGPU åŠ é€Ÿï¼‰ | è¾ƒå·®ï¼ˆä¸»çº¿ç¨‹æ‰§è¡Œï¼‰ |
| **å¤æ‚åº¦** | ç®€å•åŠ¨ç”» | å¤æ‚åŠ¨ç”»ã€æ¸¸æˆ |
| **æ§åˆ¶èƒ½åŠ›** | æœ‰é™ | å®Œå…¨å¯æ§ |
| **å…¼å®¹æ€§** | è¾ƒå¥½ | æœ€å¥½ |
| **è°ƒè¯•éš¾åº¦** | è¾ƒéš¾ | å®¹æ˜“ |

### CSS åŠ¨ç”»

**ä¼˜ç‚¹ï¼š**
- âœ… æ€§èƒ½å¥½ï¼ˆæµè§ˆå™¨ä¼˜åŒ–ã€GPU åŠ é€Ÿï¼‰
- âœ… ä»£ç ç®€æ´
- âœ… ä¸é˜»å¡ JS ä¸»çº¿ç¨‹

**ç¼ºç‚¹ï¼š**
- âŒ æ§åˆ¶èƒ½åŠ›æœ‰é™
- âŒ å¤æ‚äº¤äº’éš¾å®ç°

```css
/* CSS åŠ¨ç”»ç¤ºä¾‹ */
.box {
  width: 100px;
  height: 100px;
  background: blue;
  animation: slide 2s ease-in-out infinite;
}

@keyframes slide {
  0% { transform: translateX(0); }
  100% { transform: translateX(300px); }
}
```

### JS åŠ¨ç”»

**ä¼˜ç‚¹ï¼š**
- âœ… å®Œå…¨å¯æ§ï¼ˆæš‚åœã€å€’æ”¾ã€é€Ÿåº¦è°ƒæ•´ï¼‰
- âœ… å¯ä»¥å®ç°å¤æ‚é€»è¾‘
- âœ… å¯ä»¥ç›‘å¬åŠ¨ç”»çŠ¶æ€

**ç¼ºç‚¹ï¼š**
- âŒ æ€§èƒ½è¾ƒå·®ï¼ˆå ç”¨ä¸»çº¿ç¨‹ï¼‰
- âŒ ä»£ç å¤æ‚

```javascript
// JS åŠ¨ç”»ç¤ºä¾‹ï¼ˆä½¿ç”¨ requestAnimationFrameï¼‰
function animate() {
  const box = document.querySelector('.box');
  let position = 0;
  
  function step() {
    position += 2;
    box.style.transform = `translateX(${position}px)`;
    
    if (position < 300) {
      requestAnimationFrame(step);
    }
  }
  
  requestAnimationFrame(step);
}
```

### æ€§èƒ½å¯¹æ¯”

**CSS åŠ¨ç”»æ›´å¿«çš„åŸå› ï¼š**

1. **GPU åŠ é€Ÿ**
   ```css
   /* è§¦å‘ GPU åŠ é€Ÿçš„å±æ€§ */
   transform: translateX(100px);  /* âœ… GPU */
   opacity: 0.5;                  /* âœ… GPU */
   
   /* ä¸è§¦å‘ GPU åŠ é€Ÿ */
   left: 100px;                   /* âŒ é‡æ’ */
   width: 200px;                  /* âŒ é‡æ’ */
   ```

2. **ç‹¬ç«‹çº¿ç¨‹**ï¼šCSS åŠ¨ç”»åœ¨åˆæˆçº¿ç¨‹æ‰§è¡Œï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹

3. **æµè§ˆå™¨ä¼˜åŒ–**ï¼šæµè§ˆå™¨å¯ä»¥æå‰ä¼˜åŒ– CSS åŠ¨ç”»

### é€‰æ‹©å»ºè®®

**ä½¿ç”¨ CSS åŠ¨ç”»ï¼š**
- ç®€å•çš„è¿‡æ¸¡æ•ˆæœï¼ˆæ·¡å…¥æ·¡å‡ºã€ç§»åŠ¨ï¼‰
- ä¸éœ€è¦å¤æ‚æ§åˆ¶
- æ€§èƒ½è¦æ±‚é«˜

**ä½¿ç”¨ JS åŠ¨ç”»ï¼š**
- éœ€è¦ç²¾ç¡®æ§åˆ¶ï¼ˆæš‚åœã€å€’æ”¾ã€é€Ÿåº¦ï¼‰
- å¤æ‚çš„äº¤äº’é€»è¾‘
- æ¸¸æˆã€æ•°æ®å¯è§†åŒ–
- éœ€è¦ç›‘å¬åŠ¨ç”»çŠ¶æ€

**æœ€ä½³å®è·µï¼š**
```javascript
// ç»“åˆä½¿ç”¨ï¼šCSS è´Ÿè´£åŠ¨ç”»ï¼ŒJS è´Ÿè´£æ§åˆ¶
const box = document.querySelector('.box');

// æ·»åŠ  CSS ç±»è§¦å‘åŠ¨ç”»
box.classList.add('animate');

// ç›‘å¬åŠ¨ç”»ç»“æŸ
box.addEventListener('animationend', () => {
  console.log('åŠ¨ç”»ç»“æŸ');
});
```

---

## 13. é—­åŒ…çš„ä½œç”¨åŠå®é™…å¼€å‘åœºæ™¯

### ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ

**å®šä¹‰ï¼š** å‡½æ•°èƒ½å¤Ÿè®¿é—®å…¶è¯æ³•ä½œç”¨åŸŸå¤–çš„å˜é‡ï¼Œå³ä½¿å‡½æ•°åœ¨å…¶è¯æ³•ä½œç”¨åŸŸå¤–æ‰§è¡Œã€‚

```javascript
function outer() {
  const name = 'Alice';
  
  function inner() {
    console.log(name); // è®¿é—®å¤–éƒ¨å˜é‡
  }
  
  return inner;
}

const fn = outer();
fn(); // è¾“å‡ºï¼šAliceï¼ˆé—­åŒ…ï¼‰
```

### é—­åŒ…çš„ä½œç”¨

1. **æ•°æ®ç§æœ‰åŒ–**ï¼ˆæ¨¡æ‹Ÿç§æœ‰å˜é‡ï¼‰
2. **ä¿æŒå˜é‡çŠ¶æ€**ï¼ˆä¸è¢«åƒåœ¾å›æ”¶ï¼‰
3. **å‡½æ•°å·¥å‚**ï¼ˆåˆ›å»ºç‰¹å®šåŠŸèƒ½çš„å‡½æ•°ï¼‰
4. **æ¨¡å—åŒ–**ï¼ˆé¿å…å…¨å±€æ±¡æŸ“ï¼‰

### å®é™…å¼€å‘åœºæ™¯

#### 1. æ•°æ®ç§æœ‰åŒ–ï¼ˆå°è£…ï¼‰

```javascript
// åˆ›å»ºè®¡æ•°å™¨ï¼Œcount æ˜¯ç§æœ‰å˜é‡
function createCounter() {
  let count = 0; // ç§æœ‰å˜é‡
  
  return {
    increment() {
      count++;
      return count;
    },
    decrement() {
      count--;
      return count;
    },
    getCount() {
      return count;
    }
  };
}

const counter = createCounter();
console.log(counter.increment()); // 1
console.log(counter.increment()); // 2
console.log(counter.count);       // undefinedï¼ˆæ— æ³•ç›´æ¥è®¿é—®ï¼‰
```

#### 2. é˜²æŠ–å’ŒèŠ‚æµ

```javascript
// é˜²æŠ–å‡½æ•°
function debounce(fn, delay) {
  let timer = null; // é—­åŒ…ä¿å­˜ timer
  
  return function(...args) {
    clearTimeout(timer);
    timer = setTimeout(() => {
      fn.apply(this, args);
    }, delay);
  };
}

// ä½¿ç”¨
const handleInput = debounce(() => {
  console.log('æœç´¢...');
}, 500);

input.addEventListener('input', handleInput);
```

#### 3. æŸ¯é‡ŒåŒ–å‡½æ•°

```javascript
// é€šç”¨æŸ¯é‡ŒåŒ–
function curry(fn) {
  return function curried(...args) {
    if (args.length >= fn.length) {
      return fn.apply(this, args);
    }
    return function(...nextArgs) {
      return curried.apply(this, args.concat(nextArgs));
    };
  };
}

// ä½¿ç”¨
const add = (a, b, c) => a + b + c;
const curriedAdd = curry(add);

console.log(curriedAdd(1)(2)(3));     // 6
console.log(curriedAdd(1, 2)(3));     // 6
console.log(curriedAdd(1)(2, 3));     // 6
```

#### 4. å•ä¾‹æ¨¡å¼

```javascript
const Singleton = (function() {
  let instance = null; // é—­åŒ…ä¿å­˜å®ä¾‹
  
  function createInstance() {
    return {
      name: 'Singleton',
      getData() {
        return 'data';
      }
    };
  }
  
  return {
    getInstance() {
      if (!instance) {
        instance = createInstance();
      }
      return instance;
    }
  };
})();

const obj1 = Singleton.getInstance();
const obj2 = Singleton.getInstance();
console.log(obj1 === obj2); // trueï¼ˆåŒä¸€ä¸ªå®ä¾‹ï¼‰
```

#### 5. React Hooks ä¸­çš„é—­åŒ…

```javascript
function Counter() {
  const [count, setCount] = useState(0);
  
  // é—­åŒ…é™·é˜±ç¤ºä¾‹
  useEffect(() => {
    const timer = setInterval(() => {
      // è¿™é‡Œçš„ count æ˜¯é—­åŒ…æ•è·çš„æ—§å€¼
      console.log(count); // å§‹ç»ˆæ˜¯ 0
    }, 1000);
    
    return () => clearInterval(timer);
  }, []); // ç©ºä¾èµ–æ•°ç»„
  
  // æ­£ç¡®åšæ³•ï¼šä½¿ç”¨å‡½æ•°å¼æ›´æ–°
  useEffect(() => {
    const timer = setInterval(() => {
      setCount(prev => prev + 1); // ä½¿ç”¨æœ€æ–°å€¼
    }, 1000);
    
    return () => clearInterval(timer);
  }, []);
  
  return <div>{count}</div>;
}
```

#### 6. ç¼“å­˜å‡½æ•°ï¼ˆMemoizationï¼‰

```javascript
function memoize(fn) {
  const cache = {}; // é—­åŒ…ä¿å­˜ç¼“å­˜
  
  return function(...args) {
    const key = JSON.stringify(args);
    
    if (cache[key]) {
      console.log('ä»ç¼“å­˜è¯»å–');
      return cache[key];
    }
    
    const result = fn.apply(this, args);
    cache[key] = result;
    return result;
  };
}

// ä½¿ç”¨
const expensiveCalculation = memoize((n) => {
  console.log('è®¡ç®—ä¸­...');
  return n * n;
});

console.log(expensiveCalculation(5)); // è®¡ç®—ä¸­... 25
console.log(expensiveCalculation(5)); // ä»ç¼“å­˜è¯»å– 25
```

#### 7. æ¨¡å—åŒ–ï¼ˆIIFEï¼‰

```javascript
const MyModule = (function() {
  // ç§æœ‰å˜é‡å’Œæ–¹æ³•
  let privateVar = 'private';
  
  function privateMethod() {
    console.log('ç§æœ‰æ–¹æ³•');
  }
  
  // å…¬å¼€æ¥å£
  return {
    publicMethod() {
      console.log('å…¬å¼€æ–¹æ³•');
      privateMethod();
    },
    getPrivateVar() {
      return privateVar;
    }
  };
})();

MyModule.publicMethod();           // å…¬å¼€æ–¹æ³• ç§æœ‰æ–¹æ³•
console.log(MyModule.getPrivateVar()); // private
console.log(MyModule.privateVar);      // undefined
```

### é—­åŒ…çš„æ³¨æ„äº‹é¡¹

**1. å†…å­˜æ³„æ¼**
```javascript
// âŒ å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼
function createHandler() {
  const largeData = new Array(1000000).fill('data');
  
  return function() {
    console.log(largeData[0]); // largeData æ— æ³•è¢«å›æ”¶
  };
}

// âœ… åªä¿å­˜éœ€è¦çš„æ•°æ®
function createHandler() {
  const largeData = new Array(1000000).fill('data');
  const firstItem = largeData[0]; // åªä¿å­˜éœ€è¦çš„
  
  return function() {
    console.log(firstItem);
  };
}
```

**2. å¾ªç¯ä¸­çš„é—­åŒ…é™·é˜±**
```javascript
// âŒ é”™è¯¯ï¼šæ‰€æœ‰å‡½æ•°å…±äº«åŒä¸€ä¸ª i
for (var i = 0; i < 3; i++) {
  setTimeout(() => {
    console.log(i); // è¾“å‡ºï¼š3 3 3
  }, 100);
}

// âœ… æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ letï¼ˆå—çº§ä½œç”¨åŸŸï¼‰
for (let i = 0; i < 3; i++) {
  setTimeout(() => {
    console.log(i); // è¾“å‡ºï¼š0 1 2
  }, 100);
}

// âœ… æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ IIFE åˆ›å»ºé—­åŒ…
for (var i = 0; i < 3; i++) {
  (function(j) {
    setTimeout(() => {
      console.log(j); // è¾“å‡ºï¼š0 1 2
    }, 100);
  })(i);
}
```

---

## 14. Webpack æ‰“åŒ…ä¼˜åŒ–æ–¹å¼

### 1. æ„å»ºé€Ÿåº¦ä¼˜åŒ–

#### 1.1 ç¼©å°æ–‡ä»¶æœç´¢èŒƒå›´

```javascript
module.exports = {
  resolve: {
    // æŒ‡å®šæ¨¡å—æœç´¢ç›®å½•
    modules: ['node_modules'],
    
    // å‡å°‘æ–‡ä»¶åç¼€å°è¯•
    extensions: ['.js', '.jsx', '.json'],
    
    // é…ç½®åˆ«åï¼Œå‡å°‘æœç´¢
    alias: {
      '@': path.resolve(__dirname, 'src'),
      'components': path.resolve(__dirname, 'src/components')
    }
  },
  
  module: {
    rules: [
      {
        test: /\.js$/,
        use: 'babel-loader',
        // æ’é™¤ node_modules
        exclude: /node_modules/,
        // æˆ–æŒ‡å®šåŒ…å«ç›®å½•
        include: path.resolve(__dirname, 'src')
      }
    ]
  }
};
```

#### 1.2 ä½¿ç”¨ç¼“å­˜

```javascript
module.exports = {
  // Webpack 5 æŒä¹…åŒ–ç¼“å­˜
  cache: {
    type: 'filesystem',
    cacheDirectory: path.resolve(__dirname, '.webpack_cache')
  },
  
  module: {
    rules: [
      {
        test: /\.js$/,
        use: [
          {
            loader: 'babel-loader',
            options: {
              // Babel ç¼“å­˜
              cacheDirectory: true
            }
          }
        ]
      }
    ]
  }
};
```

#### 1.3 å¤šçº¿ç¨‹æ‰“åŒ…

```javascript
module.exports = {
  module: {
    rules: [
      {
        test: /\.js$/,
        use: [
          {
            loader: 'thread-loader',
            options: {
              workers: 3 // å¼€å¯ 3 ä¸ªçº¿ç¨‹
            }
          },
          'babel-loader'
        ]
      }
    ]
  }
};
```

#### 1.4 DLL é¢„ç¼–è¯‘ï¼ˆä¸å¸¸å˜åŒ–çš„åº“ï¼‰

```javascript
// webpack.dll.config.js
module.exports = {
  entry: {
    vendor: ['react', 'react-dom', 'lodash']
  },
  output: {
    filename: '[name].dll.js',
    library: '[name]_library'
  },
  plugins: [
    new webpack.DllPlugin({
      name: '[name]_library',
      path: path.join(__dirname, 'dll', '[name].manifest.json')
    })
  ]
};

// webpack.config.js
module.exports = {
  plugins: [
    new webpack.DllReferencePlugin({
      manifest: require('./dll/vendor.manifest.json')
    })
  ]
};
```

### 2. æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–

#### 2.1 ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰

```javascript
module.exports = {
  optimization: {
    splitChunks: {
      chunks: 'all',
      cacheGroups: {
        // ç¬¬ä¸‰æ–¹åº“å•ç‹¬æ‰“åŒ…
        vendor: {
          test: /[\\/]node_modules[\\/]/,
          name: 'vendors',
          priority: 10
        },
        // å…¬å…±ä»£ç å•ç‹¬æ‰“åŒ…
        common: {
          minChunks: 2,
          name: 'common',
          priority: 5
        }
      }
    }
  }
};
```

#### 2.2 Tree Shakingï¼ˆå»é™¤æ— ç”¨ä»£ç ï¼‰

```javascript
module.exports = {
  mode: 'production', // ç”Ÿäº§æ¨¡å¼è‡ªåŠ¨å¼€å¯
  optimization: {
    usedExports: true, // æ ‡è®°æœªä½¿ç”¨çš„å¯¼å‡º
    minimize: true     // å‹ç¼©ä»£ç 
  }
};

// package.json
{
  "sideEffects": false  // å£°æ˜æ‰€æœ‰æ–‡ä»¶éƒ½æ²¡æœ‰å‰¯ä½œç”¨
  // æˆ–æŒ‡å®šæœ‰å‰¯ä½œç”¨çš„æ–‡ä»¶
  "sideEffects": ["*.css", "*.scss"]
}
```

#### 2.3 å‹ç¼©ä»£ç 

```javascript
const TerserPlugin = require('terser-webpack-plugin');
const CssMinimizerPlugin = require('css-minimizer-webpack-plugin');

module.exports = {
  optimization: {
    minimizer: [
      // JS å‹ç¼©
      new TerserPlugin({
        parallel: true,        // å¤šçº¿ç¨‹
        terserOptions: {
          compress: {
            drop_console: true // åˆ é™¤ console
          }
        }
      }),
      // CSS å‹ç¼©
      new CssMinimizerPlugin()
    ]
  }
};
```

#### 2.4 æŒ‰éœ€åŠ è½½ï¼ˆæ‡’åŠ è½½ï¼‰

```javascript
// åŠ¨æ€ import
const Home = () => import(/* webpackChunkName: "home" */ './pages/Home');
const About = () => import(/* webpackChunkName: "about" */ './pages/About');

// React è·¯ç”±æ‡’åŠ è½½
import { lazy, Suspense } from 'react';

const Home = lazy(() => import('./pages/Home'));

function App() {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <Home />
    </Suspense>
  );
}
```

#### 2.5 å¤–éƒ¨åŒ–ä¾èµ–ï¼ˆCDNï¼‰

```javascript
module.exports = {
  externals: {
    react: 'React',
    'react-dom': 'ReactDOM',
    lodash: '_'
  }
};

// HTML ä¸­å¼•å…¥ CDN
<script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
```

### 3. è¿è¡Œæ—¶æ€§èƒ½ä¼˜åŒ–

#### 3.1 é•¿æœŸç¼“å­˜

```javascript
module.exports = {
  output: {
    filename: '[name].[contenthash:8].js',
    chunkFilename: '[name].[contenthash:8].chunk.js'
  },
  optimization: {
    // æå– runtime ä»£ç 
    runtimeChunk: 'single',
    // æ¨¡å— ID ç¨³å®šåŒ–
    moduleIds: 'deterministic'
  }
};
```

#### 3.2 Prefetch / Preload

```javascript
// Prefetchï¼šç©ºé—²æ—¶åŠ è½½
import(/* webpackPrefetch: true */ './utils');

// Preloadï¼šç«‹å³åŠ è½½
import(/* webpackPreload: true */ './critical');
```

#### 3.3 å›¾ç‰‡ä¼˜åŒ–

```javascript
module.exports = {
  module: {
    rules: [
      {
        test: /\.(png|jpg|gif)$/,
        type: 'asset',
        parser: {
          dataUrlCondition: {
            maxSize: 10 * 1024 // å°äº 10KB è½¬ base64
          }
        }
      }
    ]
  },
  plugins: [
    // å›¾ç‰‡å‹ç¼©
    new ImageMinimizerPlugin({
      minimizer: {
        implementation: ImageMinimizerPlugin.imageminMinify,
        options: {
          plugins: [
            ['gifsicle', { interlaced: true }],
            ['jpegtran', { progressive: true }],
            ['optipng', { optimizationLevel: 5 }]
          ]
        }
      }
    })
  ]
};
```

### 4. åˆ†æå·¥å…·

```javascript
const { BundleAnalyzerPlugin } = require('webpack-bundle-analyzer');

module.exports = {
  plugins: [
    // æ‰“åŒ…åˆ†æ
    new BundleAnalyzerPlugin({
      analyzerMode: 'static',
      openAnalyzer: false
    })
  ]
};
```

### ä¼˜åŒ–æ•ˆæœå¯¹æ¯”

| ä¼˜åŒ–é¡¹ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|--------|--------|--------|------|
| æ„å»ºæ—¶é—´ | 60s | 15s | 75% |
| é¦–å±åŠ è½½ | 3.5s | 1.2s | 66% |
| åŒ…ä½“ç§¯ | 2.5MB | 800KB | 68% |

### ä¼˜åŒ–æ£€æŸ¥æ¸…å•

- âœ… å¼€å¯ç”Ÿäº§æ¨¡å¼
- âœ… é…ç½®ç¼“å­˜ï¼ˆæŒä¹…åŒ–ç¼“å­˜ï¼‰
- âœ… ä»£ç åˆ†å‰²ï¼ˆsplitChunksï¼‰
- âœ… Tree Shaking
- âœ… å‹ç¼©ä»£ç ï¼ˆJSã€CSSã€å›¾ç‰‡ï¼‰
- âœ… æŒ‰éœ€åŠ è½½
- âœ… CDN å¤–éƒ¨åŒ–
- âœ… é•¿æœŸç¼“å­˜ï¼ˆcontenthashï¼‰
- âœ… å¤šçº¿ç¨‹æ‰“åŒ…
- âœ… ç¼©å°æœç´¢èŒƒå›´


---

## 16. æµè§ˆå™¨ç¼“å­˜:å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜

### ç¼“å­˜æœºåˆ¶æ¦‚è¿°

**æµè§ˆå™¨ç¼“å­˜æµç¨‹:**

```
1. è¯·æ±‚èµ„æº
   â†“
2. æ£€æŸ¥å¼ºç¼“å­˜
   â†“ æœªè¿‡æœŸ          â†“ è¿‡æœŸ
   ç›´æ¥ä½¿ç”¨ç¼“å­˜      æ£€æŸ¥åå•†ç¼“å­˜
                     â†“
                     å‘æœåŠ¡å™¨éªŒè¯
                     â†“
                     304(ä½¿ç”¨ç¼“å­˜) / 200(é‡æ–°ä¸‹è½½)
```

### å¼ºç¼“å­˜(Strong Cache)

**ç‰¹ç‚¹:**
- ä¸éœ€è¦å‘æœåŠ¡å™¨å‘é€è¯·æ±‚
- ç›´æ¥ä»æœ¬åœ°ç¼“å­˜è¯»å–
- çŠ¶æ€ç : `200 (from disk cache)` æˆ– `200 (from memory cache)`

#### 1. Expires(HTTP/1.0)

```http
# æœåŠ¡å™¨å“åº”å¤´
Expires: Wed, 21 Oct 2026 07:28:00 GMT
```

**ç¼ºç‚¹:**
- ä½¿ç”¨ç»å¯¹æ—¶é—´,ä¾èµ–å®¢æˆ·ç«¯æ—¶é—´
- å¦‚æœå®¢æˆ·ç«¯æ—¶é—´ä¸å‡†ç¡®,ä¼šå¯¼è‡´ç¼“å­˜å¤±æ•ˆ

#### 2. Cache-Control(HTTP/1.1,ä¼˜å…ˆçº§æ›´é«˜)

```http
# æœåŠ¡å™¨å“åº”å¤´
Cache-Control: max-age=3600  # ç¼“å­˜ 1 å°æ—¶
```

**å¸¸ç”¨æŒ‡ä»¤:**

```http
# ä¸ä½¿ç”¨ç¼“å­˜
Cache-Control: no-store

# ä½¿ç”¨ç¼“å­˜å‰å¿…é¡»éªŒè¯
Cache-Control: no-cache

# ç¼“å­˜ 1 å¹´(å¸¸ç”¨äºé™æ€èµ„æº)
Cache-Control: max-age=31536000

# åªèƒ½è¢«æµè§ˆå™¨ç¼“å­˜,ä¸èƒ½è¢«ä»£ç†æœåŠ¡å™¨ç¼“å­˜
Cache-Control: private

# å¯ä»¥è¢«ä»£ç†æœåŠ¡å™¨ç¼“å­˜
Cache-Control: public

# ç¼“å­˜è¿‡æœŸåå¿…é¡»é‡æ–°éªŒè¯
Cache-Control: must-revalidate
```

**ç¤ºä¾‹:**

```javascript
// Express è®¾ç½®å¼ºç¼“å­˜
app.get('/static/*', (req, res) => {
  res.setHeader('Cache-Control', 'public, max-age=31536000');
  res.sendFile(filePath);
});
```

### åå•†ç¼“å­˜(Negotiation Cache)

**ç‰¹ç‚¹:**
- éœ€è¦å‘æœåŠ¡å™¨å‘é€è¯·æ±‚éªŒè¯
- å¦‚æœèµ„æºæœªä¿®æ”¹,è¿”å› 304 Not Modified
- å¦‚æœèµ„æºå·²ä¿®æ”¹,è¿”å› 200 å’Œæ–°èµ„æº

#### 1. Last-Modified / If-Modified-Since

**å·¥ä½œæµç¨‹:**

```http
# 1. é¦–æ¬¡è¯·æ±‚,æœåŠ¡å™¨è¿”å›
HTTP/1.1 200 OK
Last-Modified: Wed, 21 Oct 2025 07:28:00 GMT
Content-Type: text/html

# 2. å†æ¬¡è¯·æ±‚,æµè§ˆå™¨å‘é€
GET /index.html HTTP/1.1
If-Modified-Since: Wed, 21 Oct 2025 07:28:00 GMT

# 3. æœåŠ¡å™¨å“åº”
# æœªä¿®æ”¹:
HTTP/1.1 304 Not Modified

# å·²ä¿®æ”¹:
HTTP/1.1 200 OK
Last-Modified: Wed, 21 Oct 2025 08:00:00 GMT
```

**ç¼ºç‚¹:**
- åªèƒ½ç²¾ç¡®åˆ°ç§’çº§
- å¦‚æœæ–‡ä»¶åœ¨ 1 ç§’å†…å¤šæ¬¡ä¿®æ”¹,æ— æ³•è¯†åˆ«
- å¦‚æœæ–‡ä»¶å†…å®¹æœªå˜ä½†ä¿®æ”¹æ—¶é—´å˜äº†,ä¼šé‡æ–°ä¸‹è½½

#### 2. ETag / If-None-Match(ä¼˜å…ˆçº§æ›´é«˜)

**å·¥ä½œæµç¨‹:**

```http
# 1. é¦–æ¬¡è¯·æ±‚,æœåŠ¡å™¨è¿”å›
HTTP/1.1 200 OK
ETag: "33a64df551425fcc55e4d42a148795d9f25f89d4"
Content-Type: text/html

# 2. å†æ¬¡è¯·æ±‚,æµè§ˆå™¨å‘é€
GET /index.html HTTP/1.1
If-None-Match: "33a64df551425fcc55e4d42a148795d9f25f89d4"

# 3. æœåŠ¡å™¨å“åº”
# æœªä¿®æ”¹:
HTTP/1.1 304 Not Modified

# å·²ä¿®æ”¹:
HTTP/1.1 200 OK
ETag: "new-hash-value"
```

**ä¼˜ç‚¹:**
- åŸºäºæ–‡ä»¶å†…å®¹çš„å“ˆå¸Œå€¼
- æ›´ç²¾ç¡®,å†…å®¹ä¸å˜ ETag å°±ä¸å˜
- ä¸å—æ—¶é—´å½±å“

**ç¤ºä¾‹:**

```javascript
// Express è®¾ç½®åå•†ç¼“å­˜
const etag = require('etag');
const fs = require('fs');

app.get('/api/data', (req, res) => {
  const data = fs.readFileSync('./data.json');
  const fileETag = etag(data);
  
  // æ£€æŸ¥ ETag
  if (req.headers['if-none-match'] === fileETag) {
    return res.status(304).end(); // æœªä¿®æ”¹
  }
  
  // å·²ä¿®æ”¹,è¿”å›æ–°æ•°æ®
  res.setHeader('ETag', fileETag);
  res.setHeader('Cache-Control', 'no-cache'); // å¿…é¡»éªŒè¯
  res.json(JSON.parse(data));
});
```

### ç¼“å­˜ç­–ç•¥å¯¹æ¯”

| ç¼“å­˜ç±»å‹ | æ˜¯å¦è¯·æ±‚æœåŠ¡å™¨ | çŠ¶æ€ç  | ä¼˜å…ˆçº§ |
|---------|--------------|--------|--------|
| **å¼ºç¼“å­˜** | å¦ | 200 (from cache) | é«˜ |
| **åå•†ç¼“å­˜** | æ˜¯(éªŒè¯) | 304 / 200 | ä½ |

### ç¼“å­˜ä¼˜å…ˆçº§

```
Cache-Control > Expires
ETag > Last-Modified
```

### å®é™…åº”ç”¨åœºæ™¯

#### 1. é™æ€èµ„æº(HTML/CSS/JS/å›¾ç‰‡)

```javascript
// webpack é…ç½®:æ–‡ä»¶åå¸¦ hash
module.exports = {
  output: {
    filename: '[name].[contenthash:8].js'
  }
};

// æœåŠ¡å™¨é…ç½®:å¼ºç¼“å­˜ 1 å¹´
app.use('/static', express.static('public', {
  maxAge: '1y',
  immutable: true
}));
```

**ç­–ç•¥:**
- æ–‡ä»¶åå¸¦ hash,å†…å®¹å˜åŒ–æ—¶æ–‡ä»¶åå˜åŒ–
- è®¾ç½®å¼ºç¼“å­˜ 1 å¹´
- HTML æ–‡ä»¶è®¾ç½®åå•†ç¼“å­˜æˆ–ä¸ç¼“å­˜

#### 2. HTML æ–‡ä»¶

```javascript
// ä¸ä½¿ç”¨å¼ºç¼“å­˜,ä½¿ç”¨åå•†ç¼“å­˜
app.get('*.html', (req, res) => {
  res.setHeader('Cache-Control', 'no-cache');
  res.sendFile(filePath);
});
```

**ç­–ç•¥:**
- ä¸ä½¿ç”¨å¼ºç¼“å­˜(no-cache)
- ä½¿ç”¨ ETag åå•†ç¼“å­˜
- ç¡®ä¿ç”¨æˆ·èƒ½åŠæ—¶è·å–æœ€æ–°ç‰ˆæœ¬

#### 3. API æ¥å£

```javascript
// ä¸ç¼“å­˜
app.get('/api/*', (req, res) => {
  res.setHeader('Cache-Control', 'no-store');
  res.json(data);
});

// çŸ­æ—¶é—´ç¼“å­˜
app.get('/api/config', (req, res) => {
  res.setHeader('Cache-Control', 'public, max-age=60'); // ç¼“å­˜ 1 åˆ†é’Ÿ
  res.json(config);
});
```

**ç­–ç•¥:**
- åŠ¨æ€æ•°æ®:ä¸ç¼“å­˜(no-store)
- ä¸å¸¸å˜åŒ–çš„é…ç½®:çŸ­æ—¶é—´å¼ºç¼“å­˜

#### 4. å›¾ç‰‡/å­—ä½“ç­‰èµ„æº

```javascript
// å¼ºç¼“å­˜ 1 å¹´
app.use('/assets', express.static('assets', {
  maxAge: '1y',
  setHeaders: (res, path) => {
    if (path.endsWith('.html')) {
      res.setHeader('Cache-Control', 'no-cache');
    }
  }
}));
```

### æœ€ä½³å®è·µ

**1. æ ¹æ®èµ„æºç±»å‹è®¾ç½®ç¼“å­˜**

```javascript
const cacheConfig = {
  // é™æ€èµ„æº(å¸¦ hash):å¼ºç¼“å­˜ 1 å¹´
  static: 'public, max-age=31536000, immutable',
  
  // HTML:åå•†ç¼“å­˜
  html: 'no-cache',
  
  // API:ä¸ç¼“å­˜
  api: 'no-store',
  
  // ä¸å¸¸å˜åŒ–çš„èµ„æº:çŸ­æ—¶é—´ç¼“å­˜
  config: 'public, max-age=3600'
};
```

**2. ä½¿ç”¨ç‰ˆæœ¬å·æˆ– hash**

```html
<!-- ä¸æ¨è:æ— æ³•æ§åˆ¶ç¼“å­˜ -->
<script src="/app.js"></script>

<!-- æ¨è:ç‰ˆæœ¬å· -->
<script src="/app.js?v=1.0.0"></script>

<!-- æœ€ä½³:æ–‡ä»¶å hash -->
<script src="/app.a3f5b2c.js"></script>
```

**3. å…³é”®èµ„æºé¢„åŠ è½½**

```html
<!-- é¢„åŠ è½½å…³é”® CSS -->
<link rel="preload" href="/critical.css" as="style">

<!-- é¢„è¿æ¥ CDN -->
<link rel="preconnect" href="https://cdn.example.com">
```

**4. Service Worker ç¼“å­˜**

```javascript
// service-worker.js
self.addEventListener('fetch', (event) => {
  event.respondWith(
    caches.match(event.request).then((response) => {
      // ç¼“å­˜å‘½ä¸­,è¿”å›ç¼“å­˜
      if (response) {
        return response;
      }
      
      // ç¼“å­˜æœªå‘½ä¸­,è¯·æ±‚ç½‘ç»œ
      return fetch(event.request).then((response) => {
        // ç¼“å­˜å“åº”
        return caches.open('v1').then((cache) => {
          cache.put(event.request, response.clone());
          return response;
        });
      });
    })
  );
});
```

### ç¼“å­˜è°ƒè¯•

**Chrome DevTools:**

1. **Network é¢æ¿**
   - Size åˆ—æ˜¾ç¤º:
     - `(disk cache)` - ç£ç›˜ç¼“å­˜
     - `(memory cache)` - å†…å­˜ç¼“å­˜
     - å®é™…å¤§å° - ä»æœåŠ¡å™¨ä¸‹è½½

2. **ç¦ç”¨ç¼“å­˜**
   - å‹¾é€‰ "Disable cache"
   - æˆ–æŒ‰ Cmd+Shift+R (Mac) / Ctrl+Shift+R (Windows) å¼ºåˆ¶åˆ·æ–°

3. **æ¸…é™¤ç¼“å­˜**
   - Application é¢æ¿ â†’ Storage â†’ Clear site data

### ç¼“å­˜é—®é¢˜æ’æŸ¥

**é—®é¢˜ 1:æ›´æ–°åç”¨æˆ·çœ‹ä¸åˆ°æ–°ç‰ˆæœ¬**

```javascript
// è§£å†³æ–¹æ¡ˆ:HTML ä¸ç¼“å­˜,é™æ€èµ„æºå¸¦ hash
// HTML
res.setHeader('Cache-Control', 'no-cache');

// JS/CSS(æ–‡ä»¶åå¸¦ hash)
// app.a3f5b2c.js
res.setHeader('Cache-Control', 'max-age=31536000');
```

**é—®é¢˜ 2:ç¼“å­˜è¿‡æœŸæ—¶é—´ä¸ç”Ÿæ•ˆ**

```javascript
// æ£€æŸ¥ä¼˜å…ˆçº§:Cache-Control > Expires
// ç¡®ä¿ä½¿ç”¨ Cache-Control
res.setHeader('Cache-Control', 'max-age=3600');
```

**é—®é¢˜ 3:åå•†ç¼“å­˜æ€»æ˜¯è¿”å› 200**

```javascript
// ç¡®ä¿è®¾ç½®äº† ETag æˆ– Last-Modified
const etag = require('etag');
const data = fs.readFileSync(filePath);
res.setHeader('ETag', etag(data));
res.setHeader('Cache-Control', 'no-cache');
```

### æ€»ç»“

**æ ¸å¿ƒåŸåˆ™:**
1. **é™æ€èµ„æº(å¸¦ hash)**:å¼ºç¼“å­˜ 1 å¹´
2. **HTML æ–‡ä»¶**:åå•†ç¼“å­˜æˆ–ä¸ç¼“å­˜
3. **API æ¥å£**:ä¸ç¼“å­˜æˆ–çŸ­æ—¶é—´ç¼“å­˜
4. **ä½¿ç”¨ ETag ä¼˜äº Last-Modified**
5. **ä½¿ç”¨ Cache-Control ä¼˜äº Expires**

**è®°å¿†å£è¯€:**
- å¼ºç¼“å­˜:ä¸é—®æœåŠ¡å™¨,ç›´æ¥ç”¨
- åå•†ç¼“å­˜:é—®æœåŠ¡å™¨,304 ç”¨,200 ä¸‹è½½
- é™æ€èµ„æº:å¼ºç¼“å­˜ + hash
- HTML:åå•†ç¼“å­˜
- API:ä¸ç¼“å­˜